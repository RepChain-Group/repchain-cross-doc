{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"RepChain Cross \u57fa\u4e8eRepChain 2.0\u7684\u8de8\u94fe\u7ec4\u4ef6 \u7acb\u523b\u8fdb\u5165 \u76f8\u5173\u6587\u6863 RepChain \u5b98\u7f51","title":"\u9996\u9875"},{"location":"#repchain-cross","text":"\u57fa\u4e8eRepChain 2.0\u7684\u8de8\u94fe\u7ec4\u4ef6 \u7acb\u523b\u8fdb\u5165","title":"RepChain Cross"},{"location":"#_1","text":"RepChain \u5b98\u7f51","title":"\u76f8\u5173\u6587\u6863"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/01.%E5%BC%95%E8%A8%80/","text":"\u5f15\u8a00 \u6ce8\u610f \u9996\u6b21\u9605\u8bfb\u672c\u6587\u6863\uff0c\u8bf7\u4e25\u683c\u6309\u7167\u6587\u6863\u987a\u5e8f\u8fdb\u884c\u9605\u8bfb\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u66f4\u52a0\u5168\u9762\u7684\u7406\u89e3\u5982\u4f55\u4f7f\u7528\u8de8\u94fe\u7ec4\u4ef6\uff0c\u8c22\u8c22\u3002","title":"\u5f15\u8a00"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/01.%E5%BC%95%E8%A8%80/#_1","text":"\u6ce8\u610f \u9996\u6b21\u9605\u8bfb\u672c\u6587\u6863\uff0c\u8bf7\u4e25\u683c\u6309\u7167\u6587\u6863\u987a\u5e8f\u8fdb\u884c\u9605\u8bfb\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u66f4\u52a0\u5168\u9762\u7684\u7406\u89e3\u5982\u4f55\u4f7f\u7528\u8de8\u94fe\u7ec4\u4ef6\uff0c\u8c22\u8c22\u3002","title":"\u5f15\u8a00"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/","text":"\u51c6\u5907\u5de5\u4f5c \u4e00\u3001\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u6216\u5de5\u5177 1. Maven \u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 ( \u5fc5\u987b ) Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 2. Gradle \u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 ( \u5fc5\u987b ) Gradle \u662f\u4e00\u4e2a\u57fa\u4e8eApache Ant\u548cApache Maven\u6982\u5ff5\u7684\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa\u5f00\u6e90\u5de5\u5177\u3002\u53ef\u901a\u8fc7\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684gradlew\u811a\u672c\u8fdb\u884c\u4e0b\u8f7d\u3002 \u9700\u8981\u4f7f\u7528\u8005\u5148\u8fdb\u884c\u4e00\u5b9a\u7684\u5b66\u4e60\u3002 3. IDE (\u5fc5\u987b) \u7f16\u8bd1\u5668\uff0c\u53ef\u6839\u636e\u81ea\u5df1\u4f7f\u7528\u60c5\u51b5\u8fdb\u884c\u9009\u62e9\uff0c\u63a8\u8350\u4f7f\u7528 \u6700\u65b0\u7248IDEA \u3002 4. RepChain (\u5fc5\u987b) \u9700\u8981\u6709\u4e00\u5957\u5df2\u7ecf\u5728\u8fd0\u884c\u7684RepChain\u7ec4\u4ef6\u73af\u5883\uff0c\u82e5\u5df2\u6709RepChain\u73af\u5883\u53ef\u5ffd\u7565\u3002 \u5feb\u901f\u642d\u5efa\u65b9\u6cd5\u53ef\u67e5\u770b \u6b64\u5904 \u3002 \u5982\u679c\u9700\u8981\u8be6\u7ec6\u7684RepChain\u6587\u6863\uff0c\u53ef\u67e5\u770b RepChain\u6587\u6863 \u3002 jdk13 2.0.0.0\u6700\u65b0\u7248 \u90e8\u7f72 CrossChainManage.scala \uff0c\u53ef\u4ee5\u4f7f\u7528\u521b\u4e16\u5757\u90e8\u7f72\uff0c\u4e5f\u53ef\u540e\u7eed\u90e8\u7f72 5. Fisco-Bcos 2.8.0\uff0c\u6309\u7167 \u5b98\u65b9\u6587\u6863\u90e8\u7f72 \u6d4b\u8bd5\u94fe\uff0c\u5e76\u90e8\u7f72\u5b98\u65b9\u63d0\u4f9b\u7684\u6d4b\u8bd5\u7528\u7684HelloWorld\u5408\u7ea6\u6765\u6a21\u62df\u76ee\u6807\u94fe\u5408\u7ea6\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5199\u4e00\u4e2a\u5408\u7ea6 6. Fabric 2.2.2\uff0c\u6309\u7167 \u5b98\u65b9\u6587\u6863\u90e8\u7f72 \u6d4b\u8bd5\u94fe\uff0c\u5e76\u90e8\u7f72\u5b98\u65b9\u63d0\u4f9b\u7684\u6d4b\u8bd5\u7528\u7684 asset-transfer-basic (\u5b98\u65b9\u811a\u672c\u90e8\u7f72\u547d\u4ee4\uff1a./network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-java -ccl java)\u5408\u7ea6\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5199\u4e00\u4e2a\u5408\u7ea6","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_1","text":"","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_2","text":"","title":"\u4e00\u3001\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u6216\u5de5\u5177"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#1-maven","text":"Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002","title":"1. Maven\u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#2-gradle","text":"Gradle \u662f\u4e00\u4e2a\u57fa\u4e8eApache Ant\u548cApache Maven\u6982\u5ff5\u7684\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa\u5f00\u6e90\u5de5\u5177\u3002\u53ef\u901a\u8fc7\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684gradlew\u811a\u672c\u8fdb\u884c\u4e0b\u8f7d\u3002 \u9700\u8981\u4f7f\u7528\u8005\u5148\u8fdb\u884c\u4e00\u5b9a\u7684\u5b66\u4e60\u3002","title":"2. Gradle\u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#3-ide","text":"\u7f16\u8bd1\u5668\uff0c\u53ef\u6839\u636e\u81ea\u5df1\u4f7f\u7528\u60c5\u51b5\u8fdb\u884c\u9009\u62e9\uff0c\u63a8\u8350\u4f7f\u7528 \u6700\u65b0\u7248IDEA \u3002","title":"3. IDE (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#4-repchain","text":"\u9700\u8981\u6709\u4e00\u5957\u5df2\u7ecf\u5728\u8fd0\u884c\u7684RepChain\u7ec4\u4ef6\u73af\u5883\uff0c\u82e5\u5df2\u6709RepChain\u73af\u5883\u53ef\u5ffd\u7565\u3002 \u5feb\u901f\u642d\u5efa\u65b9\u6cd5\u53ef\u67e5\u770b \u6b64\u5904 \u3002 \u5982\u679c\u9700\u8981\u8be6\u7ec6\u7684RepChain\u6587\u6863\uff0c\u53ef\u67e5\u770b RepChain\u6587\u6863 \u3002 jdk13 2.0.0.0\u6700\u65b0\u7248 \u90e8\u7f72 CrossChainManage.scala \uff0c\u53ef\u4ee5\u4f7f\u7528\u521b\u4e16\u5757\u90e8\u7f72\uff0c\u4e5f\u53ef\u540e\u7eed\u90e8\u7f72","title":"4. RepChain (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#5-fisco-bcos","text":"2.8.0\uff0c\u6309\u7167 \u5b98\u65b9\u6587\u6863\u90e8\u7f72 \u6d4b\u8bd5\u94fe\uff0c\u5e76\u90e8\u7f72\u5b98\u65b9\u63d0\u4f9b\u7684\u6d4b\u8bd5\u7528\u7684HelloWorld\u5408\u7ea6\u6765\u6a21\u62df\u76ee\u6807\u94fe\u5408\u7ea6\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5199\u4e00\u4e2a\u5408\u7ea6","title":"5. Fisco-Bcos"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/02.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#6-fabric","text":"2.2.2\uff0c\u6309\u7167 \u5b98\u65b9\u6587\u6863\u90e8\u7f72 \u6d4b\u8bd5\u94fe\uff0c\u5e76\u90e8\u7f72\u5b98\u65b9\u63d0\u4f9b\u7684\u6d4b\u8bd5\u7528\u7684 asset-transfer-basic (\u5b98\u65b9\u811a\u672c\u90e8\u7f72\u547d\u4ee4\uff1a./network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-java -ccl java)\u5408\u7ea6\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5199\u4e00\u4e2a\u5408\u7ea6","title":"6. Fabric"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/","text":"\u516c\u5171\u6570\u636e\u7ed3\u6784 DataType \u672c\u6a21\u5757\u4e3b\u8981\u662f\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\u8de8\u94fe\u6570\u636e\u7ed3\u6784\uff0c\u56e0\u6b64\u62bd\u53d6\u5b9a\u4e49\u4e86\u8de8\u94fe\u670d\u52a1\u4e2d\u6240\u9700\u7684\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u5728SyncInfo\u3001Storage\u3001GateWay\u8fd9\u4e09\u4e2a\u6a21\u5757\u4e2d\u90fd\u6709\u5e94\u7528\u5230\u3002 \u6570\u636e\u7ed3\u6784\u7b80\u8981\u4ecb\u7ecd \u2514\u2500\u2500 rep \u2514\u2500\u2500 cross \u251c\u2500\u2500 adapter \u2502 \u2514\u2500\u2500 model \u2502 \u251c\u2500\u2500 AdapterInfo.java \u8be5\u6570\u636e\u7ed3\u6784\u63cf\u8ff0\u9002\u914d\u5668\u4fe1\u606f \u2502 \u251c\u2500\u2500 AdapterType.java \u5b9a\u4e49\u4e86\u9002\u914d\u5668\u7c7b\u578b\uff0c\u76ee\u524d\u4e3b\u8981\u4e3aRepChain\u3001FiscoBcos-2.x\u3001Fabric-2.x \u2502 \u251c\u2500\u2500 Block.java \u62bd\u8c61\u5b9a\u4e49\u4e86\u533a\u5757\u6570\u636e\u7ed3\u6784\uff0c\u7528\u6765\u7ed9\u540c\u6b65\u89e3\u6790\u6a21\u5757\u8bf7\u6c42\u4f7f\u7528 \u2502 \u251c\u2500\u2500 ChainInfo.java \u94fe\u4fe1\u606f\uff08\u5305\u542b\u94fe\u9ad8\u5ea6\u7b49\uff09\uff0c\u7528\u6765\u7ed9\u540c\u6b65\u6a21\u5757\u67e5\u8be2\u4f7f\u7528 \u2502 \u2514\u2500\u2500 Transaction.java \u62bd\u8c61\u5b9a\u4e49\u4e86\u4ea4\u6613\u6570\u636e\u7ed3\u6784 \u2514\u2500\u2500 api \u2514\u2500\u2500 model \u251c\u2500\u2500 ErrorCode.java \u5b9a\u4e49\u4e86\u63a5\u53e3\u9519\u8bef\u7801\uff0c\u4f9b\u63a5\u53e3\u4f7f\u7528 \u251c\u2500\u2500 ResultInfo.java \u5b9a\u4e49\u4e86\u63a5\u53e3\u8fd4\u56de\uff0c\u4f9b\u63a5\u53e3\u4f7f\u7528 \u2514\u2500\u2500 ResultInfoUtil.java \u4e3a\u4e86\u65b9\u4fbf\u6784\u9020ResultInfo\u7684\u5de5\u5177\u7c7b \u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177 1. Java 1.8 ( \u5fc5\u987b ) \u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u5982\u679c\u662f\u76f4\u63a5\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728ide\u4e2d\uff0c\u4e0b\u8f7d\u540e\uff0c\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef 2. Maven \u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 ( \u5fc5\u987b ) Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u7528IDEA\u4e2d\u5bf9\u5e94\u7684maven\u63d2\u4ef6\u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3ajar\u5305\u5e76\u5b89\u88c5\u5230\u672c\u5730maven\u4ed3\u5e93\uff0c\u4e4b\u540e\u522b\u7684\u4f9d\u8d56DataType\u7684\u8de8\u94fe\u6a21\u5757\u5c31\u53ef\u4ee5\u5f15\u7528\u8be5jar\u5305\u4e86\u3002 mvn clear mvn compile mvn install \u6784\u5efa\u5b8c\u6210\u5e76\u5b89\u88c5\u5230\u672c\u5730\u5e93\u540e\uff0c \u5176\u4ed6\u8de8\u94fe\u6a21\u5757 \u5373\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a // maven <dependency> <groupId> net.repchain </groupId> <artifactId> repchain-cross-datatype </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> // gradle implementation 'net.repchain:repchain-cross-datatype:1.0-SNAPSHOT' // sbt libraryDependencies += \"net.repchain\" % \"repchain-cross-datatype\" % \"1.0-SNAPSHOT\"","title":"\u6570\u636e\u7ed3\u6784DataType"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/#datatype","text":"\u672c\u6a21\u5757\u4e3b\u8981\u662f\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\u8de8\u94fe\u6570\u636e\u7ed3\u6784\uff0c\u56e0\u6b64\u62bd\u53d6\u5b9a\u4e49\u4e86\u8de8\u94fe\u670d\u52a1\u4e2d\u6240\u9700\u7684\u4e00\u4e9b\u6570\u636e\u7ed3\u6784\uff0c\u5728SyncInfo\u3001Storage\u3001GateWay\u8fd9\u4e09\u4e2a\u6a21\u5757\u4e2d\u90fd\u6709\u5e94\u7528\u5230\u3002","title":"\u516c\u5171\u6570\u636e\u7ed3\u6784DataType"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/#_1","text":"\u2514\u2500\u2500 rep \u2514\u2500\u2500 cross \u251c\u2500\u2500 adapter \u2502 \u2514\u2500\u2500 model \u2502 \u251c\u2500\u2500 AdapterInfo.java \u8be5\u6570\u636e\u7ed3\u6784\u63cf\u8ff0\u9002\u914d\u5668\u4fe1\u606f \u2502 \u251c\u2500\u2500 AdapterType.java \u5b9a\u4e49\u4e86\u9002\u914d\u5668\u7c7b\u578b\uff0c\u76ee\u524d\u4e3b\u8981\u4e3aRepChain\u3001FiscoBcos-2.x\u3001Fabric-2.x \u2502 \u251c\u2500\u2500 Block.java \u62bd\u8c61\u5b9a\u4e49\u4e86\u533a\u5757\u6570\u636e\u7ed3\u6784\uff0c\u7528\u6765\u7ed9\u540c\u6b65\u89e3\u6790\u6a21\u5757\u8bf7\u6c42\u4f7f\u7528 \u2502 \u251c\u2500\u2500 ChainInfo.java \u94fe\u4fe1\u606f\uff08\u5305\u542b\u94fe\u9ad8\u5ea6\u7b49\uff09\uff0c\u7528\u6765\u7ed9\u540c\u6b65\u6a21\u5757\u67e5\u8be2\u4f7f\u7528 \u2502 \u2514\u2500\u2500 Transaction.java \u62bd\u8c61\u5b9a\u4e49\u4e86\u4ea4\u6613\u6570\u636e\u7ed3\u6784 \u2514\u2500\u2500 api \u2514\u2500\u2500 model \u251c\u2500\u2500 ErrorCode.java \u5b9a\u4e49\u4e86\u63a5\u53e3\u9519\u8bef\u7801\uff0c\u4f9b\u63a5\u53e3\u4f7f\u7528 \u251c\u2500\u2500 ResultInfo.java \u5b9a\u4e49\u4e86\u63a5\u53e3\u8fd4\u56de\uff0c\u4f9b\u63a5\u53e3\u4f7f\u7528 \u2514\u2500\u2500 ResultInfoUtil.java \u4e3a\u4e86\u65b9\u4fbf\u6784\u9020ResultInfo\u7684\u5de5\u5177\u7c7b","title":"\u6570\u636e\u7ed3\u6784\u7b80\u8981\u4ecb\u7ecd"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/#_2","text":"","title":"\u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/#1-java-18","text":"\u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u5982\u679c\u662f\u76f4\u63a5\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728ide\u4e2d\uff0c\u4e0b\u8f7d\u540e\uff0c\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef","title":"1. Java 1.8 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/#2-maven","text":"Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u7528IDEA\u4e2d\u5bf9\u5e94\u7684maven\u63d2\u4ef6\u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3ajar\u5305\u5e76\u5b89\u88c5\u5230\u672c\u5730maven\u4ed3\u5e93\uff0c\u4e4b\u540e\u522b\u7684\u4f9d\u8d56DataType\u7684\u8de8\u94fe\u6a21\u5757\u5c31\u53ef\u4ee5\u5f15\u7528\u8be5jar\u5305\u4e86\u3002 mvn clear mvn compile mvn install \u6784\u5efa\u5b8c\u6210\u5e76\u5b89\u88c5\u5230\u672c\u5730\u5e93\u540e\uff0c \u5176\u4ed6\u8de8\u94fe\u6a21\u5757 \u5373\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a // maven <dependency> <groupId> net.repchain </groupId> <artifactId> repchain-cross-datatype </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> // gradle implementation 'net.repchain:repchain-cross-datatype:1.0-SNAPSHOT' // sbt libraryDependencies += \"net.repchain\" % \"repchain-cross-datatype\" % \"1.0-SNAPSHOT\"","title":"2. Maven\u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/03.DataType/#_3","text":"","title":""},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/","text":"\u540c\u6b65\u6a21\u5757 SyncInfo \u5728\u8de8\u94fe\u670d\u52a1\u6574\u4e2a\u67b6\u6784\u4e2d\u4f5c\u4e3a\u901a\u8fc7 GateWay\u7f51\u5173\u6a21\u5757 \u62c9\u53d6\u76ee\u6807\u94fe\u533a\u5757\u5e76\u4f9b Storage\u5b58\u50a8\u6a21\u5757 \u89e3\u6790\u5b58\u50a8\u5230\u672c\u5730\u6570\u636e\u5e93\u7684\u6a21\u5757\uff0c\u9664\u4e86\u96c6\u6210\u5230Storage\u4e2d\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5355\u72ec\u6a21\u5757\u4f7f\u7528\uff0c\u4f46\u662f\u4e0d\u7ba1\u5982\u4f55\u4f7f\u7528\uff0c\u4e00\u5b9a\u9700\u8981\u914d\u5408GateWay\u6a21\u5757\uff0c\u542f\u52a8\u540c\u6b65\u670d\u52a1\u9700\u89813\u4e2a\u5165\u53c2\uff0c\u76ee\u6807\u94fe\u7684adapterInfo\u3001syncInfo\uff08\u9ad8\u5ea6\u548chash\u4fe1\u606f\uff09\u548cgateWay\u7684host\uff0c\u542f\u52a8\u540c\u6b65\u670d\u52a1\u540e\uff0c\u5373\u53ef\u5411 gateWayHost\u5bf9\u5e94\u7684GateWay\u7f51\u5173 \u540c\u6b65\u62c9\u53d6\u6307\u5b9a\u76ee\u6807\u94fe\u7684\u533a\u5757 AdapterInfo\uff1a\u8bbe\u7f6e\u94feHash\u548c\u94fe\u7c7b\u578b\uff08\u94feHash\u5373\u9002\u914d\u5668ID\uff0c\u65b9\u4fbfGateWay\u7aef\u6839\u636e\u8be5ID\u548c\u94fe\u7c7b\u578b\u6765\u9009\u7528\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6765\u6784\u9020\u76f8\u5e94\u7684\u9002\u914d\u5668\uff09\uff0c\u94fe\u7c7b\u578b\u5982RepChain\u3001FiscoBcos-2.x\u3001Fabric-2.x SyncInfo\uff1a\u540c\u6b65\u6307\u5b9a\u9ad8\u5ea6\u7684\u533a\u5757\u533a\u5757\u7684 \u4e0a\u4e00\u4e2a \u533a\u5757\u7684\u9ad8\u5ea6height\u548c\u533a\u5757Hash\uff0c\u4f1a\u4ece\u8be5height\u548chash\u7684\u4e0b\u4e00\u4e2a\u533a\u5757\u5f00\u59cb\u540c\u6b65\uff0c\u4e00\u76f4\u540c\u6b65\u5230\u6700\u65b0\u9ad8\u5ea6 \u6ce8\u610f \u6bd4\u5982\u60f3\u8981\u540c\u6b65\u9ad8\u5ea65\u53ca\u4e4b\u540e\u7684\u533a\u5757\uff0c\u90a3\u4e48syncInfo\u4e2dlocalHeight\u8bbe\u7f6e\u4e3a\u4e0a\u4e00\u4e2a\u533a\u5757\u7684\u9ad8\u5ea6\u53734\uff0clocBlkHash\u8bbe\u7f6e\u4e3a\u9ad8\u5ea6\u4e3a5\u7684\u533a\u5757\u7684preHash\u53ca\u9ad8\u5ea6\u4e3a4\u7684\u533a\u5757\u7684blkHash gateWayHost\uff1a\u7f51\u5173\u7684\u5730\u5740\uff0c ip:port \u9879\u76ee\u4ee3\u7801\u6587\u4ef6\u7b80\u8981\u4ecb\u7ecd \u2514\u2500\u2500 rep \u2514\u2500\u2500 cross \u251c\u2500\u2500 protos \u2502 \u2514\u2500\u2500 rep \u2502 \u2514\u2500\u2500 Peer.java protobuf\u751f\u6210\u7c7b\uff0c\u5b9a\u4e49\u4e86RepChain\u6240\u4f7f\u7528\u7684\u533a\u5757\u4ea4\u6613\u7b49\u6570\u636e\u7ed3\u6784 \u2514\u2500\u2500 sync \u251c\u2500\u2500 SyncChainService.java \u540c\u6b65\u670d\u52a1\u7684\u4e3b\u7c7b\uff0c\u8c03\u7528ChainInfoClient\u6765\u901a\u8fc7\u7f51\u5173\u62c9\u53d6\u76ee\u6807\u94fe\u533a\u5757 \u251c\u2500\u2500 client \u2502 \u251c\u2500\u2500 ChainHttpClient.java \u5c01\u88c5\u4e86\u53d1\u9001http\u8bf7\u6c42\u7684\u5de5\u5177\u7c7b \u2502 \u2514\u2500\u2500 ChainInfoClient.java \u7528\u6765\u5bf9\u63a5GateWay\uff0c\u67e5\u8be2ChainInfo\uff0c\u62c9\u53d6\u6307\u5b9a\u9ad8\u5ea6\u533a\u5757 \u251c\u2500\u2500 exception \u2502 \u2514\u2500\u2500 SyncBlockException.java \u540c\u6b65\u533a\u5757\u5f02\u5e38\uff0c\u5982\u679c\u540c\u6b65\u7a0b\u5e8f\u6355\u83b7\u5230\u8be5\u5f02\u5e38\uff0c\u540c\u6b65\u7a0b\u5e8f\u4f1a\u4e00\u76f4\u91cd\u590d\u5c1d\u8bd5\u62c9\u53d6\u8be5\u9ad8\u5ea6\u533a\u5757 \u2514\u2500\u2500 model \u251c\u2500\u2500 ChainInfo.java \u2514\u2500\u2500 SyncInfo.java \u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177 1. Java 1.8 ( \u5fc5\u987b ) \u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u5982\u679c\u662f\u76f4\u63a5\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728ide\u4e2d\uff0c\u4e0b\u8f7d\u540e\uff0c\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef 2. Maven \u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 ( \u5fc5\u987b ) Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u7528IDEA\u4e2d\u5bf9\u5e94\u7684maven\u63d2\u4ef6\u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3ajar\u5305\u5e76\u5b89\u88c5\u5230\u672c\u5730maven\u4ed3\u5e93\uff08\u4e13\u4e1a\u672f\u8bed\uff09\uff0c\u4e4b\u540e\u522b\u7684\u4f9d\u8d56SyncInfo\u7684\u8de8\u94fe\u6a21\u5757\u5c31\u53ef\u4ee5\u5f15\u7528\u8be5jar\u5305\u4e86\u3002 mvn clear mvn compile mvn install \u5176\u4ed6\u8de8\u94fe\u6a21\u5757\u5373\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a // maven <dependency> <groupId> net.repchain </groupId> <artifactId> repchain-cross-syncinfo </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> // gradle implementation 'net.repchain:repchain-cross-syncinfo:1.0-SNAPSHOT' // sbt libraryDependencies += \"net.repchain\" % \"repchain-cross-syncinfo\" % \"1.0-SNAPSHOT\" \u4f7f\u7528\u65b9\u5f0f \u6ce8\u610f \u540c\u6b65\u4e0d\u540c\u7c7b\u578b\u7684\u533a\u5757\u94fe\u533a\u5757\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u6709\u4e00\u4e9b\u7ec6\u5fae\u5dee\u522b\u5982\u4e0b\uff1a RepChain\u533a\u5757\u9ad8\u5ea6\u4ece1\u5f00\u59cb\uff0c\u5e76\u4e14\u521b\u4e16\u5feb\u6ca1\u6709preHash\uff0c\u56e0\u6b64\u4ece\u521b\u4e16\u5757\u5f00\u59cb\u540c\u6b65\u7684\u8bdd\uff0cSyncInfo\u5982\u4e0b\uff1a SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( 0 ). setLocBlkHash ( \"\" ). build (); Fabric\u533a\u5757\u9ad8\u5ea6\u4ece0\u5f00\u59cb\uff0c\u5e76\u4e14\u521b\u4e16\u5757\u6ca1\u6709preHash\uff0c\u56e0\u6b64\u4ece\u521b\u59cb\u5757\u5f00\u59cb\u540c\u6b65\u7684\u8bdd\uff0cSyncInfo\u5982\u4e0b\uff1a SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"\" ). build (); FiscoBcos\u533a\u5757\u9ad8\u5ea6\u4ece0\u5f00\u59cb\uff0c\u5e76\u4e14\u521b\u59cb\u5757\u6709preHash\uff0c\u56e0\u6b64\u4ece\u521b\u4e16\u5757\u5f00\u59cb\u540c\u6b65\u7684\u8bdd\uff0cSyncInfo\u5982\u4e0b\uff1a // \"0x0000000000000000000000000000000000000000000000000000000000000000\"\u4e3a\u521b\u4e16\u5757\u7684preHash SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"0x0000000000000000000000000000000000000000000000000000000000000000\" ). build (); \u5982\u4e0b\u7684 \u6d4b\u8bd5\u4f8b \u4e2d\uff0c\u9996\u5148\u4e3aSyncChainService\u8bbe\u7f6e\u4e86\u4e09\u4e2a\u53c2\u6570\uff0c\u5373adapterInfo\u3001syncInfo\u548cgateWayHost\uff0c\u542f\u52a8\u540c\u6b65\u670d\u52a1\u540e\uff0c\u5373\u53ef\u901a\u8fc7\u56de\u8c03\u65b9\u6cd5onSuccess\u83b7\u53d6\u5230\u5728 dataType\u4e2d\u5b9a\u4e49\u7684Block\u6570\u636e\u7ed3\u6784 \u7684\u533a\u5757\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7801\u67e5\u770bBlock\u90fd\u5177\u6709\u54ea\u4e9b\u5c5e\u6027\uff0c\u63a5\u7740\u5373\u53ef\u9488\u5bf9\u6027\u7684\u505a\u5904\u7406\u4e86\uff0c\u5982\u8c03\u7528Storage\u6a21\u5757\u6765\u89e3\u6790\u548c\u5b58\u50a8\u533a\u5757\u548c\u4ea4\u6613\u5230\u6570\u636e\u5e93 package rep.cross.storage ; import com.rcjava.protos.Peer ; import org.fisco.bcos.web3j.protocol.core.methods.response.BcosBlock ; import org.junit.jupiter.api.* ; import rep.cross.adapter.AdapterInfo ; import rep.cross.adapter.AdapterType ; import rep.cross.model.Block ; import rep.cross.storage.impl.BlockStorageStub ; import rep.cross.storage.impl.fisco.FiscoBlockStorage ; import rep.cross.storage.impl.rep.RepBlockStorage ; import rep.cross.sync.SyncChainService ; import rep.cross.sync.exception.SyncBlockException ; import rep.cross.sync.model.SyncInfo ; /** * @author zyf */ @TestMethodOrder ( MethodOrderer . OrderAnnotation . class ) @TestInstance ( TestInstance . Lifecycle . PER_CLASS ) public class SyncServiceTest extends BaseTest { // repchain SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( 0 ). setLocBlkHash ( \"\" ). build (); AdapterInfo repAdapterInfo = AdapterInfo . builder (). setId ( \"79e5d00cc30f40d3a857ec4511c4fa4e\" ). setType ( AdapterType . REPCHAIN ). build (); // fisco-bcos SyncInfo fiscoSyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"0x0000000000000000000000000000000000000000000000000000000000000000\" ). build (); AdapterInfo fiscoAdapterInfo = AdapterInfo . builder (). setId ( \"74e8089786e54f859112d20666719ac6\" ). setType ( AdapterType . FISCO_BCOS_2 ). build (); // fabric2 SyncInfo fabric2SyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"\" ). build (); AdapterInfo fabric2AdapterInfo = AdapterInfo . builder (). setId ( \"74e8089786e54f859112d20666719ac7\" ). setType ( AdapterType . FABRIC_2 ). build (); BlockStorageStub blockStorageStub = new BlockStorageStub ( dataSource ); @Test @DisplayName ( \"\u6d4b\u8bd5repchain\u540c\u6b65\" ) void testRepSyncService () throws InterruptedException { // \u521d\u59cb\u5316\u540c\u6b65\u7a0b\u5e8f SyncChainService repSyncChainService = new SyncChainService ( repAdapterInfo , repSyncInfo , gateWayHost ); RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); logger . info ( \"\u51c6\u5907\u540c\u6b65...\" ); repSyncChainService . start ( new SyncChainService . CallBack () { @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // repchain Peer . Block repBlock = objectMapper . convertValue ( block . getRawBlock (), Peer . Block . class ); try { // repchain System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( repBlock )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } @Test @DisplayName ( \"\u6d4b\u8bd5fisco\u540c\u6b65\" ) void testFiscoSyncService () throws InterruptedException { SyncChainService fiscoSyncChainService = new SyncChainService ( fiscoAdapterInfo , fiscoSyncInfo , gateWayHost ); FiscoBlockStorage fiscoBlockStorage = new FiscoBlockStorage ( dataSource ); fiscoSyncChainService . start ( new SyncChainService . CallBack () { @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // fisco-bcos BcosBlock . Block bcosBlock = objectMapper . convertValue ( block . getRawBlock (), BcosBlock . Block . class ); try { // fisco-bcos System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( bcosBlock )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } @Test @DisplayName ( \"\u6d4b\u8bd5fabric2\u540c\u6b65\" ) void testFabric2SyncService () throws InterruptedException { SyncChainService fabric2SyncChainService = new SyncChainService ( fabric2AdapterInfo , fabric2SyncInfo , gateWayHost ); Fabric2BlockStorage fiscoBlockStorage = new Fabric2BlockStorage ( dataSource ); fabric2SyncChainService . start ( new SyncChainService . CallBack () { @SneakyThrows @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // fabric2\uff0c\u6ce8\u610f\u8fd9\u91ccBlockInfo\u7684\u6784\u9020 Constructor < BlockInfo > constructor = BlockInfo . class . getDeclaredConstructor ( Common . Block . class ); constructor . setAccessible ( true ); BlockInfo fabric2block = constructor . newInstance ( objectMapper . convertValue ((( HashMap ) block . getRawBlock ()). get ( \"block\" ), Common . Block . class )); try { // fabric2 System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( fabric2block )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } }","title":"\u540c\u6b65\u6a21\u5757SyncInfo"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#syncinfo","text":"\u5728\u8de8\u94fe\u670d\u52a1\u6574\u4e2a\u67b6\u6784\u4e2d\u4f5c\u4e3a\u901a\u8fc7 GateWay\u7f51\u5173\u6a21\u5757 \u62c9\u53d6\u76ee\u6807\u94fe\u533a\u5757\u5e76\u4f9b Storage\u5b58\u50a8\u6a21\u5757 \u89e3\u6790\u5b58\u50a8\u5230\u672c\u5730\u6570\u636e\u5e93\u7684\u6a21\u5757\uff0c\u9664\u4e86\u96c6\u6210\u5230Storage\u4e2d\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5355\u72ec\u6a21\u5757\u4f7f\u7528\uff0c\u4f46\u662f\u4e0d\u7ba1\u5982\u4f55\u4f7f\u7528\uff0c\u4e00\u5b9a\u9700\u8981\u914d\u5408GateWay\u6a21\u5757\uff0c\u542f\u52a8\u540c\u6b65\u670d\u52a1\u9700\u89813\u4e2a\u5165\u53c2\uff0c\u76ee\u6807\u94fe\u7684adapterInfo\u3001syncInfo\uff08\u9ad8\u5ea6\u548chash\u4fe1\u606f\uff09\u548cgateWay\u7684host\uff0c\u542f\u52a8\u540c\u6b65\u670d\u52a1\u540e\uff0c\u5373\u53ef\u5411 gateWayHost\u5bf9\u5e94\u7684GateWay\u7f51\u5173 \u540c\u6b65\u62c9\u53d6\u6307\u5b9a\u76ee\u6807\u94fe\u7684\u533a\u5757 AdapterInfo\uff1a\u8bbe\u7f6e\u94feHash\u548c\u94fe\u7c7b\u578b\uff08\u94feHash\u5373\u9002\u914d\u5668ID\uff0c\u65b9\u4fbfGateWay\u7aef\u6839\u636e\u8be5ID\u548c\u94fe\u7c7b\u578b\u6765\u9009\u7528\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u6765\u6784\u9020\u76f8\u5e94\u7684\u9002\u914d\u5668\uff09\uff0c\u94fe\u7c7b\u578b\u5982RepChain\u3001FiscoBcos-2.x\u3001Fabric-2.x SyncInfo\uff1a\u540c\u6b65\u6307\u5b9a\u9ad8\u5ea6\u7684\u533a\u5757\u533a\u5757\u7684 \u4e0a\u4e00\u4e2a \u533a\u5757\u7684\u9ad8\u5ea6height\u548c\u533a\u5757Hash\uff0c\u4f1a\u4ece\u8be5height\u548chash\u7684\u4e0b\u4e00\u4e2a\u533a\u5757\u5f00\u59cb\u540c\u6b65\uff0c\u4e00\u76f4\u540c\u6b65\u5230\u6700\u65b0\u9ad8\u5ea6 \u6ce8\u610f \u6bd4\u5982\u60f3\u8981\u540c\u6b65\u9ad8\u5ea65\u53ca\u4e4b\u540e\u7684\u533a\u5757\uff0c\u90a3\u4e48syncInfo\u4e2dlocalHeight\u8bbe\u7f6e\u4e3a\u4e0a\u4e00\u4e2a\u533a\u5757\u7684\u9ad8\u5ea6\u53734\uff0clocBlkHash\u8bbe\u7f6e\u4e3a\u9ad8\u5ea6\u4e3a5\u7684\u533a\u5757\u7684preHash\u53ca\u9ad8\u5ea6\u4e3a4\u7684\u533a\u5757\u7684blkHash gateWayHost\uff1a\u7f51\u5173\u7684\u5730\u5740\uff0c ip:port","title":"\u540c\u6b65\u6a21\u5757SyncInfo"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#_1","text":"\u2514\u2500\u2500 rep \u2514\u2500\u2500 cross \u251c\u2500\u2500 protos \u2502 \u2514\u2500\u2500 rep \u2502 \u2514\u2500\u2500 Peer.java protobuf\u751f\u6210\u7c7b\uff0c\u5b9a\u4e49\u4e86RepChain\u6240\u4f7f\u7528\u7684\u533a\u5757\u4ea4\u6613\u7b49\u6570\u636e\u7ed3\u6784 \u2514\u2500\u2500 sync \u251c\u2500\u2500 SyncChainService.java \u540c\u6b65\u670d\u52a1\u7684\u4e3b\u7c7b\uff0c\u8c03\u7528ChainInfoClient\u6765\u901a\u8fc7\u7f51\u5173\u62c9\u53d6\u76ee\u6807\u94fe\u533a\u5757 \u251c\u2500\u2500 client \u2502 \u251c\u2500\u2500 ChainHttpClient.java \u5c01\u88c5\u4e86\u53d1\u9001http\u8bf7\u6c42\u7684\u5de5\u5177\u7c7b \u2502 \u2514\u2500\u2500 ChainInfoClient.java \u7528\u6765\u5bf9\u63a5GateWay\uff0c\u67e5\u8be2ChainInfo\uff0c\u62c9\u53d6\u6307\u5b9a\u9ad8\u5ea6\u533a\u5757 \u251c\u2500\u2500 exception \u2502 \u2514\u2500\u2500 SyncBlockException.java \u540c\u6b65\u533a\u5757\u5f02\u5e38\uff0c\u5982\u679c\u540c\u6b65\u7a0b\u5e8f\u6355\u83b7\u5230\u8be5\u5f02\u5e38\uff0c\u540c\u6b65\u7a0b\u5e8f\u4f1a\u4e00\u76f4\u91cd\u590d\u5c1d\u8bd5\u62c9\u53d6\u8be5\u9ad8\u5ea6\u533a\u5757 \u2514\u2500\u2500 model \u251c\u2500\u2500 ChainInfo.java \u2514\u2500\u2500 SyncInfo.java","title":"\u9879\u76ee\u4ee3\u7801\u6587\u4ef6\u7b80\u8981\u4ecb\u7ecd"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#_2","text":"","title":"\u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#1-java-18","text":"\u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u5982\u679c\u662f\u76f4\u63a5\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728ide\u4e2d\uff0c\u4e0b\u8f7d\u540e\uff0c\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef","title":"1. Java 1.8 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#2-maven","text":"Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u7528IDEA\u4e2d\u5bf9\u5e94\u7684maven\u63d2\u4ef6\u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3ajar\u5305\u5e76\u5b89\u88c5\u5230\u672c\u5730maven\u4ed3\u5e93\uff08\u4e13\u4e1a\u672f\u8bed\uff09\uff0c\u4e4b\u540e\u522b\u7684\u4f9d\u8d56SyncInfo\u7684\u8de8\u94fe\u6a21\u5757\u5c31\u53ef\u4ee5\u5f15\u7528\u8be5jar\u5305\u4e86\u3002 mvn clear mvn compile mvn install \u5176\u4ed6\u8de8\u94fe\u6a21\u5757\u5373\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a // maven <dependency> <groupId> net.repchain </groupId> <artifactId> repchain-cross-syncinfo </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> // gradle implementation 'net.repchain:repchain-cross-syncinfo:1.0-SNAPSHOT' // sbt libraryDependencies += \"net.repchain\" % \"repchain-cross-syncinfo\" % \"1.0-SNAPSHOT\"","title":"2. Maven\u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#_3","text":"\u6ce8\u610f \u540c\u6b65\u4e0d\u540c\u7c7b\u578b\u7684\u533a\u5757\u94fe\u533a\u5757\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u6709\u4e00\u4e9b\u7ec6\u5fae\u5dee\u522b\u5982\u4e0b\uff1a RepChain\u533a\u5757\u9ad8\u5ea6\u4ece1\u5f00\u59cb\uff0c\u5e76\u4e14\u521b\u4e16\u5feb\u6ca1\u6709preHash\uff0c\u56e0\u6b64\u4ece\u521b\u4e16\u5757\u5f00\u59cb\u540c\u6b65\u7684\u8bdd\uff0cSyncInfo\u5982\u4e0b\uff1a SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( 0 ). setLocBlkHash ( \"\" ). build (); Fabric\u533a\u5757\u9ad8\u5ea6\u4ece0\u5f00\u59cb\uff0c\u5e76\u4e14\u521b\u4e16\u5757\u6ca1\u6709preHash\uff0c\u56e0\u6b64\u4ece\u521b\u59cb\u5757\u5f00\u59cb\u540c\u6b65\u7684\u8bdd\uff0cSyncInfo\u5982\u4e0b\uff1a SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"\" ). build (); FiscoBcos\u533a\u5757\u9ad8\u5ea6\u4ece0\u5f00\u59cb\uff0c\u5e76\u4e14\u521b\u59cb\u5757\u6709preHash\uff0c\u56e0\u6b64\u4ece\u521b\u4e16\u5757\u5f00\u59cb\u540c\u6b65\u7684\u8bdd\uff0cSyncInfo\u5982\u4e0b\uff1a // \"0x0000000000000000000000000000000000000000000000000000000000000000\"\u4e3a\u521b\u4e16\u5757\u7684preHash SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"0x0000000000000000000000000000000000000000000000000000000000000000\" ). build (); \u5982\u4e0b\u7684 \u6d4b\u8bd5\u4f8b \u4e2d\uff0c\u9996\u5148\u4e3aSyncChainService\u8bbe\u7f6e\u4e86\u4e09\u4e2a\u53c2\u6570\uff0c\u5373adapterInfo\u3001syncInfo\u548cgateWayHost\uff0c\u542f\u52a8\u540c\u6b65\u670d\u52a1\u540e\uff0c\u5373\u53ef\u901a\u8fc7\u56de\u8c03\u65b9\u6cd5onSuccess\u83b7\u53d6\u5230\u5728 dataType\u4e2d\u5b9a\u4e49\u7684Block\u6570\u636e\u7ed3\u6784 \u7684\u533a\u5757\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7801\u67e5\u770bBlock\u90fd\u5177\u6709\u54ea\u4e9b\u5c5e\u6027\uff0c\u63a5\u7740\u5373\u53ef\u9488\u5bf9\u6027\u7684\u505a\u5904\u7406\u4e86\uff0c\u5982\u8c03\u7528Storage\u6a21\u5757\u6765\u89e3\u6790\u548c\u5b58\u50a8\u533a\u5757\u548c\u4ea4\u6613\u5230\u6570\u636e\u5e93 package rep.cross.storage ; import com.rcjava.protos.Peer ; import org.fisco.bcos.web3j.protocol.core.methods.response.BcosBlock ; import org.junit.jupiter.api.* ; import rep.cross.adapter.AdapterInfo ; import rep.cross.adapter.AdapterType ; import rep.cross.model.Block ; import rep.cross.storage.impl.BlockStorageStub ; import rep.cross.storage.impl.fisco.FiscoBlockStorage ; import rep.cross.storage.impl.rep.RepBlockStorage ; import rep.cross.sync.SyncChainService ; import rep.cross.sync.exception.SyncBlockException ; import rep.cross.sync.model.SyncInfo ; /** * @author zyf */ @TestMethodOrder ( MethodOrderer . OrderAnnotation . class ) @TestInstance ( TestInstance . Lifecycle . PER_CLASS ) public class SyncServiceTest extends BaseTest { // repchain SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( 0 ). setLocBlkHash ( \"\" ). build (); AdapterInfo repAdapterInfo = AdapterInfo . builder (). setId ( \"79e5d00cc30f40d3a857ec4511c4fa4e\" ). setType ( AdapterType . REPCHAIN ). build (); // fisco-bcos SyncInfo fiscoSyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"0x0000000000000000000000000000000000000000000000000000000000000000\" ). build (); AdapterInfo fiscoAdapterInfo = AdapterInfo . builder (). setId ( \"74e8089786e54f859112d20666719ac6\" ). setType ( AdapterType . FISCO_BCOS_2 ). build (); // fabric2 SyncInfo fabric2SyncInfo = SyncInfo . builder (). setLocalHeight ( - 1 ). setLocBlkHash ( \"\" ). build (); AdapterInfo fabric2AdapterInfo = AdapterInfo . builder (). setId ( \"74e8089786e54f859112d20666719ac7\" ). setType ( AdapterType . FABRIC_2 ). build (); BlockStorageStub blockStorageStub = new BlockStorageStub ( dataSource ); @Test @DisplayName ( \"\u6d4b\u8bd5repchain\u540c\u6b65\" ) void testRepSyncService () throws InterruptedException { // \u521d\u59cb\u5316\u540c\u6b65\u7a0b\u5e8f SyncChainService repSyncChainService = new SyncChainService ( repAdapterInfo , repSyncInfo , gateWayHost ); RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); logger . info ( \"\u51c6\u5907\u540c\u6b65...\" ); repSyncChainService . start ( new SyncChainService . CallBack () { @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // repchain Peer . Block repBlock = objectMapper . convertValue ( block . getRawBlock (), Peer . Block . class ); try { // repchain System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( repBlock )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } @Test @DisplayName ( \"\u6d4b\u8bd5fisco\u540c\u6b65\" ) void testFiscoSyncService () throws InterruptedException { SyncChainService fiscoSyncChainService = new SyncChainService ( fiscoAdapterInfo , fiscoSyncInfo , gateWayHost ); FiscoBlockStorage fiscoBlockStorage = new FiscoBlockStorage ( dataSource ); fiscoSyncChainService . start ( new SyncChainService . CallBack () { @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // fisco-bcos BcosBlock . Block bcosBlock = objectMapper . convertValue ( block . getRawBlock (), BcosBlock . Block . class ); try { // fisco-bcos System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( bcosBlock )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } @Test @DisplayName ( \"\u6d4b\u8bd5fabric2\u540c\u6b65\" ) void testFabric2SyncService () throws InterruptedException { SyncChainService fabric2SyncChainService = new SyncChainService ( fabric2AdapterInfo , fabric2SyncInfo , gateWayHost ); Fabric2BlockStorage fiscoBlockStorage = new Fabric2BlockStorage ( dataSource ); fabric2SyncChainService . start ( new SyncChainService . CallBack () { @SneakyThrows @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // fabric2\uff0c\u6ce8\u610f\u8fd9\u91ccBlockInfo\u7684\u6784\u9020 Constructor < BlockInfo > constructor = BlockInfo . class . getDeclaredConstructor ( Common . Block . class ); constructor . setAccessible ( true ); BlockInfo fabric2block = constructor . newInstance ( objectMapper . convertValue ((( HashMap ) block . getRawBlock ()). get ( \"block\" ), Common . Block . class )); try { // fabric2 System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( fabric2block )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } }","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/04.SyncInfo/#_4","text":"","title":""},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/05.Storage/","text":"\u5b58\u50a8\u6a21\u5757 Storage \u540c\u6b65\u6a21\u5757SyncInfo \u540c\u6b65\u533a\u5757\uff0c\u7d27\u63a5\u7740\u5c06\u540c\u6b65\u5230\u7684\u533a\u5757\u4ea4\u7ed9\u5b58\u50a8\u6a21\u5757Storage\u6765\u8fdb\u884c\u5904\u7406\uff0cStorage\u6a21\u5757\u5c06\u539f\u94fe\u548c\u76ee\u6807\u94fe\u7684\u533a\u5757\u4ea4\u6613\u7b49\u6570\u636e\u540c\u6b65\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u540c\u65f6\u89e3\u6790RepChain\u8de8\u94fe\u7ba1\u7406\u5408\u7ea6\u7684state\u6570\u636e\uff0c\u81ea\u52a8\u63d0\u4ea4\u4ee3\u7406\u8de8\u94fe\u4ea4\u6613\u3001\u76d1\u6d4b\u76ee\u6807\u94fe\u533a\u5757\u5e76\u63d0\u4ea4\u51fa\u5757\u56de\u6267\u5230RepChain\u4e0a \u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177 1. Java 1.8 ( \u5fc5\u987b ) \u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u5982\u679c\u662f\u76f4\u63a5\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728ide\u4e2d\uff0c\u4e0b\u8f7d\u540e\uff0c\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef 2. Maven \u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 ( \u5fc5\u987b ) Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u7528IDEA\u4e2d\u5bf9\u5e94\u7684maven\u63d2\u4ef6\u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3ajar\u5305\u5e76\u5b89\u88c5\u5230\u672c\u5730maven\u4ed3\u5e93\uff0c\u4e4b\u540e\u522b\u7684\u4f9d\u8d56DataType\u7684\u8de8\u94fe\u6a21\u5757\u5c31\u53ef\u4ee5\u5f15\u7528\u8be5jar\u5305\u4e86\u3002 mvn clear mvn compile mvn install \u6784\u5efa\u5b8c\u6210\u5e76\u5b89\u88c5\u5230\u672c\u5730\u5e93\u540e\uff0c \u5176\u4ed6\u8de8\u94fe\u6a21\u5757 \u5373\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a // maven <dependency> <groupId> net.repchain </groupId> <artifactId> repchain-cross-storage </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> // gradle implementation 'net.repchain:repchain-cross-storage:1.0-SNAPSHOT' // sbt libraryDependencies += \"net.repchain\" % \"repchain-cross-storage\" % \"1.0-SNAPSHOT\" \u6570\u636e\u5e93\u8868 \u7b80\u8981\u8bf4\u660e chain_type_base \u94fe\u7c7b\u578b\u57fa\u8868 cross_account_info RepChain\u4e0a\u7684\u8d26\u6237\u8bc1\u4e66\u8868 cross_block \u539f\u94feRepChain\u4ee5\u53ca\u76ee\u6807\u94feFiscoBcos-2.x\u7b49\u94fe\u7684\u533a\u5757\u6570\u636e cross_chain_info RepChain\u548cFiscoBcos-2.x\u7684\u94fe\u4fe1\u606f\uff0c\u5176\u4e2dchain_hash\u5bf9\u5e94\u9002\u914d\u5668id\uff0cconfig_path\u5bf9\u5e94\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4f1a\u4e0a\u4f20\u5230\u7f51\u5173\u90a3\u8fb9 cross_contract_info \u4e3b\u8981\u6ce8\u518c\u6240\u6d89\u53ca\u5230\u7684\u5408\u7ea6\u4fe1\u606f cross_repchain_config \u63d0\u4ea4\u56de\u6267\u65f6\u5019\u9700\u8981\u5176\u4e2d\u7684repchain_host cross_route_info \u4ece\u54ea\u4e2a\u5408\u7ea6\u8de8\u5230\u54ea\u4e2a\u5408\u7ea6 cross_transaction \u539f\u94feRepChain\u4ee5\u53ca\u76ee\u6807\u94feFiscoBcos-2.x\u7b49\u94fe\u7684\u4ea4\u6613\u6570\u636e Chain_type_base: Cross_repchain_config: \u4f7f\u7528\u65b9\u5f0f \u4e3b\u8981\u4e24\u884c\u5982\u4e0b\uff1a // \u6784\u9020\u5b58\u50a8\u5bf9\u8c61 BlockStorageStub blockStorageStub = new BlockStorageStub ( dataSource ); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); \u6216 RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); repBlockStorage . saveBlock ( info , block , gateWayHost ); \u5c06\u540c\u6b65\u6a21\u5757\u4e0e\u5b58\u50a8\u6a21\u5757\u7ed3\u5408\u4f7f\u7528\u7684\u793a\u4f8b\u5982\u4e0b\uff1a package rep.cross.storage ; import com.rcjava.protos.Peer ; import lombok.SneakyThrows ; import org.junit.jupiter.api.* ; import rep.cross.adapter.model.AdapterInfo ; import rep.cross.adapter.model.AdapterType ; import rep.cross.adapter.model.Block ; import rep.cross.storage.impl.BlockStorageStub ; import rep.cross.storage.impl.fabric2.Fabric2BlockStorage ; import rep.cross.storage.impl.fisco.FiscoBlockStorage ; import rep.cross.storage.impl.rep.RepBlockStorage ; import rep.cross.sync.SyncChainService ; import rep.cross.sync.exception.SyncBlockException ; import rep.cross.sync.model.SyncInfo ; import java.lang.reflect.Constructor ; import java.util.HashMap ; /** * @author zyf */ @TestMethodOrder ( MethodOrderer . OrderAnnotation . class ) @TestInstance ( TestInstance . Lifecycle . PER_CLASS ) public class SyncServiceTest extends BaseTest { // repchain SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( 0 ). setLocBlkHash ( \"\" ). build (); AdapterInfo repAdapterInfo = AdapterInfo . builder (). setId ( \"79e5d00cc30f40d3a857ec4511c4fa4e\" ). setType ( AdapterType . REPCHAIN ). build (); // \u6784\u9020\u5b58\u50a8\u5bf9\u8c61 BlockStorageStub blockStorageStub = new BlockStorageStub ( dataSource ); RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); @Test @DisplayName ( \"\u6d4b\u8bd5repchain\u540c\u6b65\" ) void testRepSyncService () throws InterruptedException { // \u521d\u59cb\u5316\u540c\u6b65\u7a0b\u5e8f SyncChainService repSyncChainService = new SyncChainService ( repAdapterInfo , repSyncInfo , gateWayHost ); RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); logger . info ( \"\u51c6\u5907\u540c\u6b65...\" ); repSyncChainService . start ( new SyncChainService . CallBack () { @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // repchain Peer . Block repBlock = objectMapper . convertValue ( block . getRawBlock (), Peer . Block . class ); try { // repchain System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( repBlock )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); // \u5b58\u50a8\u89e3\u6790 // repBlockStorage.saveBlock(info, block, gateWayHost); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } }","title":"\u5b58\u50a8\u6a21\u5757Storage"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/05.Storage/#storage","text":"\u540c\u6b65\u6a21\u5757SyncInfo \u540c\u6b65\u533a\u5757\uff0c\u7d27\u63a5\u7740\u5c06\u540c\u6b65\u5230\u7684\u533a\u5757\u4ea4\u7ed9\u5b58\u50a8\u6a21\u5757Storage\u6765\u8fdb\u884c\u5904\u7406\uff0cStorage\u6a21\u5757\u5c06\u539f\u94fe\u548c\u76ee\u6807\u94fe\u7684\u533a\u5757\u4ea4\u6613\u7b49\u6570\u636e\u540c\u6b65\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u540c\u65f6\u89e3\u6790RepChain\u8de8\u94fe\u7ba1\u7406\u5408\u7ea6\u7684state\u6570\u636e\uff0c\u81ea\u52a8\u63d0\u4ea4\u4ee3\u7406\u8de8\u94fe\u4ea4\u6613\u3001\u76d1\u6d4b\u76ee\u6807\u94fe\u533a\u5757\u5e76\u63d0\u4ea4\u51fa\u5757\u56de\u6267\u5230RepChain\u4e0a","title":"\u5b58\u50a8\u6a21\u5757Storage"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/05.Storage/#_1","text":"","title":"\u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/05.Storage/#1-java-18","text":"\u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u5982\u679c\u662f\u76f4\u63a5\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728ide\u4e2d\uff0c\u4e0b\u8f7d\u540e\uff0c\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef","title":"1. Java 1.8 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/05.Storage/#2-maven","text":"Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Java \u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\uff1a\u5c06\u539f\u6750\u6599\uff08java\u3001js\u3001css\u3001html....\uff09->\u4ea7\u54c1\uff08\u53ef\u53d1\u5e03\u9879\u76ee\uff09 \u7f16\u8bd1-\u6253\u5305-\u90e8\u7f72-\u6d4b\u8bd5 -> \u81ea\u52a8\u6784\u5efa\u53ef\u4ece \u5b98\u7f51 \u4e0b\u8f7d\u5e76\u914d\u7f6e\u76f8\u5173\u4fe1\u606f\u3002 \u6ce8\u610f \u9700\u8981\u5c06Maven\u7684\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528maven\u547d\u4ee4\u3002 \u9700\u8981\u5c06\u540c\u4e00\u4e2aMaven\u5730\u5740\u914d\u7f6e\u5230\u4f7f\u7528\u7684\u7f16\u8bd1\u5668\u4e2d\uff0c\u9632\u6b62\u9879\u76ee\u6784\u5efa\u65f6\u51fa\u73b0\u5176\u4ed6\u95ee\u9898\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u7528IDEA\u4e2d\u5bf9\u5e94\u7684maven\u63d2\u4ef6\u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3ajar\u5305\u5e76\u5b89\u88c5\u5230\u672c\u5730maven\u4ed3\u5e93\uff0c\u4e4b\u540e\u522b\u7684\u4f9d\u8d56DataType\u7684\u8de8\u94fe\u6a21\u5757\u5c31\u53ef\u4ee5\u5f15\u7528\u8be5jar\u5305\u4e86\u3002 mvn clear mvn compile mvn install \u6784\u5efa\u5b8c\u6210\u5e76\u5b89\u88c5\u5230\u672c\u5730\u5e93\u540e\uff0c \u5176\u4ed6\u8de8\u94fe\u6a21\u5757 \u5373\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a // maven <dependency> <groupId> net.repchain </groupId> <artifactId> repchain-cross-storage </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> // gradle implementation 'net.repchain:repchain-cross-storage:1.0-SNAPSHOT' // sbt libraryDependencies += \"net.repchain\" % \"repchain-cross-storage\" % \"1.0-SNAPSHOT\" \u6570\u636e\u5e93\u8868 \u7b80\u8981\u8bf4\u660e chain_type_base \u94fe\u7c7b\u578b\u57fa\u8868 cross_account_info RepChain\u4e0a\u7684\u8d26\u6237\u8bc1\u4e66\u8868 cross_block \u539f\u94feRepChain\u4ee5\u53ca\u76ee\u6807\u94feFiscoBcos-2.x\u7b49\u94fe\u7684\u533a\u5757\u6570\u636e cross_chain_info RepChain\u548cFiscoBcos-2.x\u7684\u94fe\u4fe1\u606f\uff0c\u5176\u4e2dchain_hash\u5bf9\u5e94\u9002\u914d\u5668id\uff0cconfig_path\u5bf9\u5e94\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u4f1a\u4e0a\u4f20\u5230\u7f51\u5173\u90a3\u8fb9 cross_contract_info \u4e3b\u8981\u6ce8\u518c\u6240\u6d89\u53ca\u5230\u7684\u5408\u7ea6\u4fe1\u606f cross_repchain_config \u63d0\u4ea4\u56de\u6267\u65f6\u5019\u9700\u8981\u5176\u4e2d\u7684repchain_host cross_route_info \u4ece\u54ea\u4e2a\u5408\u7ea6\u8de8\u5230\u54ea\u4e2a\u5408\u7ea6 cross_transaction \u539f\u94feRepChain\u4ee5\u53ca\u76ee\u6807\u94feFiscoBcos-2.x\u7b49\u94fe\u7684\u4ea4\u6613\u6570\u636e Chain_type_base: Cross_repchain_config:","title":"2. Maven\u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/05.Storage/#_2","text":"\u4e3b\u8981\u4e24\u884c\u5982\u4e0b\uff1a // \u6784\u9020\u5b58\u50a8\u5bf9\u8c61 BlockStorageStub blockStorageStub = new BlockStorageStub ( dataSource ); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); \u6216 RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); repBlockStorage . saveBlock ( info , block , gateWayHost ); \u5c06\u540c\u6b65\u6a21\u5757\u4e0e\u5b58\u50a8\u6a21\u5757\u7ed3\u5408\u4f7f\u7528\u7684\u793a\u4f8b\u5982\u4e0b\uff1a package rep.cross.storage ; import com.rcjava.protos.Peer ; import lombok.SneakyThrows ; import org.junit.jupiter.api.* ; import rep.cross.adapter.model.AdapterInfo ; import rep.cross.adapter.model.AdapterType ; import rep.cross.adapter.model.Block ; import rep.cross.storage.impl.BlockStorageStub ; import rep.cross.storage.impl.fabric2.Fabric2BlockStorage ; import rep.cross.storage.impl.fisco.FiscoBlockStorage ; import rep.cross.storage.impl.rep.RepBlockStorage ; import rep.cross.sync.SyncChainService ; import rep.cross.sync.exception.SyncBlockException ; import rep.cross.sync.model.SyncInfo ; import java.lang.reflect.Constructor ; import java.util.HashMap ; /** * @author zyf */ @TestMethodOrder ( MethodOrderer . OrderAnnotation . class ) @TestInstance ( TestInstance . Lifecycle . PER_CLASS ) public class SyncServiceTest extends BaseTest { // repchain SyncInfo repSyncInfo = SyncInfo . builder (). setLocalHeight ( 0 ). setLocBlkHash ( \"\" ). build (); AdapterInfo repAdapterInfo = AdapterInfo . builder (). setId ( \"79e5d00cc30f40d3a857ec4511c4fa4e\" ). setType ( AdapterType . REPCHAIN ). build (); // \u6784\u9020\u5b58\u50a8\u5bf9\u8c61 BlockStorageStub blockStorageStub = new BlockStorageStub ( dataSource ); RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); @Test @DisplayName ( \"\u6d4b\u8bd5repchain\u540c\u6b65\" ) void testRepSyncService () throws InterruptedException { // \u521d\u59cb\u5316\u540c\u6b65\u7a0b\u5e8f SyncChainService repSyncChainService = new SyncChainService ( repAdapterInfo , repSyncInfo , gateWayHost ); RepBlockStorage repBlockStorage = new RepBlockStorage ( dataSource ); logger . info ( \"\u51c6\u5907\u540c\u6b65...\" ); repSyncChainService . start ( new SyncChainService . CallBack () { @Override public void onSuccess ( AdapterInfo info , Block block ) throws SyncBlockException { // repchain Peer . Block repBlock = objectMapper . convertValue ( block . getRawBlock (), Peer . Block . class ); try { // repchain System . out . println ( objectMapper . writerWithDefaultPrettyPrinter (). writeValueAsString ( repBlock )); // \u5b58\u50a8\u89e3\u6790 blockStorageStub . saveBlock ( info , block , gateWayHost ); // \u5b58\u50a8\u89e3\u6790 // repBlockStorage.saveBlock(info, block, gateWayHost); } catch ( Exception e ) { throw new SyncBlockException ( e . getMessage ()); } System . out . println ( block . getHash ()); } @Override public void onError ( SyncBlockException syncBlockException ) { } }); Thread . currentThread (). join (); } }","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/","text":"\u8de8\u94fe \u7f51\u5173 \u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177 1. Java 11( \u5fc5\u987b ) \u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-11\u3002 \u5982\u679c\u662f\u76f4\u63a5\u5b98\u7f51\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728IDEA\u4e2d\u4e0b\u8f7d\uff0c\u4e0b\u8f7d\u540e\uff0c\u5728IDE\u4e2d\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef 2. Sbt \u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 ( \u5fc5\u987b ) Sbt\u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Scala\u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u6ce8\u610f \u9700\u8981\u5c06Sbt\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528sbt\u547d\u4ee4\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u5728IDEA\u4e2d\u5148\u5b89\u88c5 scala\u63d2\u4ef6 \uff0c\u7136\u540e\u7528 IDEA \u4e2d\u7684 sbt-shell \u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3a\u53ef\u6267\u884cjar\u5305\uff0c\u6253\u5305\u597d\u7684jar\u5305\u5728 target/scala-2.12/repchain-cross-gateway-assembly-0.1.jar \uff0c\u4e4b\u540e\u5373\u53ef\u5728\u6709java11\u7684\u73af\u5883\u4e0b\u90e8\u7f72\u4f7f\u7528\u3002 sbt > clean > compile > assembly \u4f7f\u7528\u65b9\u5f0f \u542f\u52a8\u65b9\u5f0f \u8fd9\u91cc\u6307\u7684\u662f\u542f\u52a8\u7f51\u5173\u7ba1\u7406\u670d\u52a1 1.\u7ec8\u7aef\u4e0b\u542f\u52a8\uff1a jar\u5305\u90e8\u7f72\u76ee\u5f55\u5982\u4e0b\uff1a ``` \u251c\u2500\u2500 conf \u2502 \u251c\u2500\u2500 121000005l35120456.node1 \u9884\u7f6e\u7f51\u5173\u5b9e\u4f8b1\u7684\u914d\u7f6e\u6587\u4ef6 \u2502 \u251c\u2500\u2500 12110107bi45jh675g.node2 \u9884\u7f6e\u7f51\u5173\u5b9e\u4f8b2\u7684\u914d\u7f6e\u6587\u4ef6 \u2502 \u251c\u2500\u2500 logback.xml \u65e5\u5fd7\u7684\u914d\u7f6e\u6587\u4ef6 \u2502 \u2514\u2500\u2500 management \u7f51\u5173\u5b9e\u4f8b\u7ba1\u7406\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6 \u251c\u2500\u2500 jks \u2502 \u251c\u2500\u2500 credence-net \u2502 \u251c\u2500\u2500 identity-net ssl\u65f6\u9700\u8981 \u2502 \u2514\u2500\u2500 management ssl\u65f6\u9700\u8981 \u2514\u2500\u2500 repchain-cross-gateway-assembly-0.1.jar \u53ef\u6267\u884cjar\u5305 ``` \u53ef\u76f4\u63a5\u5c06jar\u5305\u653e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6765\u542f\u52a8\uff0c\u542f\u52a8\u547d\u4ee4\u5982\u4e0b\uff1a java -Dlogback.configurationFile = conf/logback.xml -jar repchain-cross-gateway-assembly-0.1.jar 2.IDEA\u542f\u52a8\uff1a \u76f4\u63a5\u5982\u4e0b\u56fe\u914d\u7f6e\u5373\u53ef \u6ce8\u610f \u5176\u4e2dvm\u53c2\u6570\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\uff1a --add-exports java.base/jdk.internal.misc=ALL-UNNAMED --add-opens java.base/jdk.internal.misc=ALL-UNNAMED -Dio.netty.tryReflectionSetAccessible=true --illegal-access=warn \u7f51\u5173\u7ba1\u7406\u670d\u52a1 GateWayManagement\u7c7b\u4f3c\u4e8eRepChainManagement\uff0c\u542f\u52a8\u7f51\u5173\u7ba1\u7406\u670d\u52a1\uff08\u5373\u8fd0\u884c\u4e0a\u4e00\u5c0f\u8282\u63d0\u5230\u7684\u542f\u52a8\u547d\u4ee4\uff09\u540e\uff0c\u63a5\u7740\u542f\u52a8\u4e00\u4e2aGateWay\u5b9e\u4f8b\uff08\u7c7b\u4f3c\u4e8eRepChain\u8282\u70b9\uff09\uff0c\u5373\u542f\u52a8\u4e00\u4e2a\u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b\uff0c\u5982\u542f\u52a8***.node1\uff0c\u76f8\u5f53\u4e8e\u8d77\u4e86\u4e00\u4e2a\u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b GateWayManagement \u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b\u7ba1\u7406\u670d\u52a1 GateWayManagement\u7684\u914d\u7f6e\u6587\u4ef6\uff1a conf/management/system.conf \u5176\u4e2d\u5e38\u7528\u7684\u914d\u7f6e\u9879\u4e3a\uff1ahttp_service_port = 7081 #http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba4\u4e3a7081 \u542f\u52a8GateWay--1\uff08\u53ef\u4ee5\u4eceswagger-ui\u4e0a\u542f\u52a8\uff09 curl -X GET \"http://localhost:7081/management/system/SystemStartup/121000005l35120456.node1\" -H \"accept: text/plain\" GateWayManagement\u7684swagger-ui\u5982\u4e0b\uff1a http://localhost:7081/swagger/index.html \u505c\u6b62GateWay--1\uff08\u53ef\u4ee5\u4eceswagger-ui\u4e0a\u505c\u6b62\uff09 curl -X GET \"http://localhost:7081/management/system/SystemStop/121000005l35120456.node1\" -H \"accept: text/plain\" \u7f51\u5173\u670d\u52a1 \u8de8\u94fe\u7f51\u5173\u76ee\u524d\u5b9e\u73b0\u4e863\u79cd\u7c7b\u578b\u533a\u5757\u94fe\uff08RepChain\u3001Fabric-2.x\u3001FiscoBcos-2.x\uff09\u7684\u9002\u914d\u5668\uff0c\u7528\u6765\u5bf9\u63a5\u5bf9\u5e94\u7684\u76ee\u6807\u94fe \u53ef\u67e5\u8be2repchain\u3001fisco-bcos2.x\u3001fabric-2.x\uff1a\u67e5\u8be2\u533a\u5757\u3001\u533a\u5757\u5934\u3001\u4ea4\u6613\u3001chainInfo \u4ee3\u7406\u5411repchain\u3001fisco-bcos2.x\u3001fabric-2.x\uff1a\u63d0\u4ea4\u4ea4\u6613 GateWay \u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b\uff0c\u901a\u8fc7\u7f51\u5173\u7ba1\u7406\u670d\u52a1\u542f\u52a8\u4e00\u4e2a\u7f51\u5173\u5b9e\u4f8bGateWay--1 GateWay-1\u7684\u914d\u7f6e\u6587\u4ef6\uff1a conf/121000005l35120456.node1/system.conf \u5e38\u7528\u7684\u914d\u7f6e\u9879\uff1ahttp_service_port = 19081 #http\u670d\u52a1\u7684\u7aef\u53e3\u53f7 GateWay--1\u7684swagger-ui\u5982\u4e0b\uff1a http://localhost:19081/swagger/index.html \u7f51\u5173\u63a5\u53e3 \u76ee\u524d\u5b9e\u73b0\u7684\u7f51\u5173\u63a5\u53e3\u5982\u4e0b\uff0c\u5176\u4ed6\u63a5\u53e3\u4e3a\u9884\u7559\uff0c\u6682\u672a\u5b9e\u73b0 \u63a5\u53e3\u8def\u5f84 \u63a5\u53e3\u8bf4\u660e \u8bf7\u6c42\u65b9\u5f0f /block/hash \u6839\u636e\u533a\u5757hash\u67e5\u8be2\u533a\u5757Json POST /block/header/hash \u6839\u636e\u533a\u5757hash\u67e5\u8be2\u533a\u5757\u5934Json POST /block/height \u6839\u636e\u533a\u5757\u9ad8\u5ea6\u67e5\u8be2\u533a\u5757Json POST /block/header/height \u6839\u636e\u533a\u5757\u9ad8\u5ea6\u67e5\u8be2\u533a\u5757Json POST /block/analyze/height \u6839\u636e\u533a\u5757\u9ad8\u5ea6\u67e5\u8be2\u533a\u5757\uff08\u62bd\u8c61\u51fa\u6765\u7684Block\u6570\u636e\u7ed3\u6784\uff09 POST /chaininfo \u67e5\u8be2\u5bf9\u5e94\u94fe\u7684\u5f53\u524d\u94fe\u9ad8\u5ea6\u548c\u5bf9\u5e94\u7684\u533a\u5757hash POST /transaction/txid \u6839\u636e\u4ea4\u6613ID\u67e5\u8be2\u4ea4\u6613 POST /transaction/postTran \u63d0\u4ea4\u6784\u9020\u4ea4\u6613\u6240\u9700\u7684\u53c2\u6570\uff0c\u4ea4\u7ed9\u7f51\u5173\u6765\u4ee3\u7406\u6784\u9020\u5e76\u63d0\u4ea4\u4ea4\u6613\u5230\u94fe\u4e0a POST /chainconfig \u63d0\u4ea4\u94fe\u914d\u7f6e\uff08\u9002\u914d\u5668\u914d\u7f6e\uff09 POST \u793a\u4f8b\uff1a \u8fd4\u56de\u6210\u529fcode\u4e3a0\uff0c\u5931\u8d25code\u4e3a1 1. /block/hash \u8bf7\u6c42\uff1a { \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"number\" : 7 , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"nonce\" : 0 , \"sha3Uncles\" : null , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"author\" : null , \"sealer\" : \"0x1\" , \"mixHash\" : null , \"extraData\" : [], \"gasLimit\" : 0 , \"gasUsed\" : 0 , \"timestamp\" : 1675138168205 , \"transactions\" : [ { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } ], \"uncles\" : null , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"numberRaw\" : \"0x7\" , \"nonceRaw\" : null , \"gasLimitRaw\" : \"0x0\" , \"timestampRaw\" : \"0x1860603f58d\" , \"gasUsedRaw\" : \"0x0\" } } 2. /block/header/hash \u8bf7\u6c42\uff1a { \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"dbHash\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"extraData\" : [], \"gasLimit\" : \"0x0\" , \"gasUsed\" : \"0x0\" , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"number\" : 7 , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"sealer\" : \"0x1\" , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"signatureList\" : [ { \"index\" : \"0x3\" , \"signature\" : \"0x018c6cd0a281faf42a6bf16f4620f16891015092636bc9ab1b033b9e32bdfb7d52ee532a8949108fc09516f49d20e0f5bee2e7260f8771be05e14a59978b770000\" }, { \"index\" : \"0x2\" , \"signature\" : \"0xf01fc506aba99ccdf7dc1539cd05aee44588ea583db685a2a09f2b74a78ada0a64a33bdddc49c35a1e881ebd2bd7f580f556dfbf7d3ddcfa4c8ad783dd9451d001\" }, { \"index\" : \"0x0\" , \"signature\" : \"0xb88b6d30b4d2e68f71d1c6e40d108632bbea791bb6589aa5ba5f13d5df241341033dc9efd509612769957440a419701f413fe88dcd71c318b05e145eebbfb10300\" } ], \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"timestamp\" : \"0x1860603f58d\" , \"numberRaw\" : \"7\" } } 3. /block/height \u8bf7\u6c42\uff1a { \"height\" : 7 , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"number\" : 7 , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"nonce\" : 0 , \"sha3Uncles\" : null , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"author\" : null , \"sealer\" : \"0x1\" , \"mixHash\" : null , \"extraData\" : [], \"gasLimit\" : 0 , \"gasUsed\" : 0 , \"timestamp\" : 1675138168205 , \"transactions\" : [ { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } ], \"uncles\" : null , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"numberRaw\" : \"0x7\" , \"nonceRaw\" : null , \"gasLimitRaw\" : \"0x0\" , \"timestampRaw\" : \"0x1860603f58d\" , \"gasUsedRaw\" : \"0x0\" } } 4. /block/header/height \u8bf7\u6c42\uff1a { \"height\" : 7 , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"dbHash\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"extraData\" : [], \"gasLimit\" : \"0x0\" , \"gasUsed\" : \"0x0\" , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"number\" : 7 , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"sealer\" : \"0x1\" , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"signatureList\" : [ { \"index\" : \"0x3\" , \"signature\" : \"0x018c6cd0a281faf42a6bf16f4620f16891015092636bc9ab1b033b9e32bdfb7d52ee532a8949108fc09516f49d20e0f5bee2e7260f8771be05e14a59978b770000\" }, { \"index\" : \"0x2\" , \"signature\" : \"0xf01fc506aba99ccdf7dc1539cd05aee44588ea583db685a2a09f2b74a78ada0a64a33bdddc49c35a1e881ebd2bd7f580f556dfbf7d3ddcfa4c8ad783dd9451d001\" }, { \"index\" : \"0x0\" , \"signature\" : \"0xb88b6d30b4d2e68f71d1c6e40d108632bbea791bb6589aa5ba5f13d5df241341033dc9efd509612769957440a419701f413fe88dcd71c318b05e145eebbfb10300\" } ], \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"timestamp\" : \"0x1860603f58d\" , \"numberRaw\" : \"7\" } } 5. /block/analyze/height \u54cd\u5e94\u8fd4\u56de\u7684\u662f\u81ea\u5b9a\u4e49\u7684Block\u6570\u636e\u7ed3\u6784\uff0crawBlock\u4e3a\u539f\u59cbBlockJsonString \u8bf7\u6c42\uff1a { \"height\" : 7 , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"adapterId\" : \"74e8089786e54f859112d20666719ac6\" , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"prevHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"height\" : 7 , \"timeStamp\" : \"1675138168205\" , \"tranIds\" : [ \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" ], \"trans\" : null , \"rawBlock\" : { \"number\" : 7 , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"nonce\" : 0 , \"sha3Uncles\" : null , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"author\" : null , \"sealer\" : \"0x1\" , \"mixHash\" : null , \"extraData\" : [], \"gasLimit\" : 0 , \"gasUsed\" : 0 , \"timestamp\" : 1675138168205 , \"transactions\" : [ { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } ], \"uncles\" : null , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"numberRaw\" : \"0x7\" , \"nonceRaw\" : null , \"gasLimitRaw\" : \"0x0\" , \"timestampRaw\" : \"0x1860603f58d\" , \"gasUsedRaw\" : \"0x0\" } } } 6. /chaininfo \u8bf7\u6c42\uff1a { \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"height\" : 229 , \"totalTransNumber\" : 965 } } 7. /transaction/txid \u8bf7\u6c42\uff1a { \"txid\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } } 8. /chainconfig \u63d0\u4ea4/\u66f4\u65b0\u9002\u914d\u5668\u7684\u914d\u7f6e\u6587\u4ef6 \u8bf7\u6c42\uff0c f orm - da ta \uff1a adap ter Id : S tr i n g co nf igZip : File/Bi nar y \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : \"79e5d00cc30f40d3a857ec4511c4fa4e.zip\" }","title":"\u8de8\u94fe\u7f51\u5173GateWay"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_1","text":"","title":"\u8de8\u94fe\u7f51\u5173"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_2","text":"","title":"\u6784\u5efa\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#1-java-11","text":"\u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u53ef\uff09\uff0c\u4ece \u5b98\u7f51 \u76f4\u63a5\u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c\u9009\u62e9Azul-zulu-community\uff0cjdk-11\u3002 \u5982\u679c\u662f\u76f4\u63a5\u5b98\u7f51\u4e0b\u8f7d\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u5982\u679c\u662f\u5728IDEA\u4e2d\u4e0b\u8f7d\uff0c\u4e0b\u8f7d\u540e\uff0c\u5728IDE\u4e2d\u6307\u5b9a\u76f8\u5e94\u7248\u672cjdk\u5373\u53ef","title":"1. Java 11(\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#2-sbt","text":"Sbt\u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9 Scala\u9879\u76ee\u8fdb\u884c\u6784\u5efa\u3001\u4f9d\u8d56\u7ba1\u7406\uff0c\u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u6784\u5efa\u5de5\u5177\u3002 \u6ce8\u610f \u9700\u8981\u5c06Sbt\u914d\u7f6e\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528sbt\u547d\u4ee4\u3002 \u5728\u73af\u5883\u5de5\u5177\u51c6\u5907\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\uff0c\u6253\u5f00\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u6216\u8005\u662f\u5728IDEA\u4e2d\u5148\u5b89\u88c5 scala\u63d2\u4ef6 \uff0c\u7136\u540e\u7528 IDEA \u4e2d\u7684 sbt-shell \u6267\u884c\u76f8\u5e94\u547d\u4ee4\uff09\uff0c\u5c06\u6a21\u5757\u6253\u5305\u4e3a\u53ef\u6267\u884cjar\u5305\uff0c\u6253\u5305\u597d\u7684jar\u5305\u5728 target/scala-2.12/repchain-cross-gateway-assembly-0.1.jar \uff0c\u4e4b\u540e\u5373\u53ef\u5728\u6709java11\u7684\u73af\u5883\u4e0b\u90e8\u7f72\u4f7f\u7528\u3002 sbt > clean > compile > assembly","title":"2. Sbt\u9879\u76ee\u6784\u5efa\u7ba1\u7406\u5de5\u5177 (\u5fc5\u987b)"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_3","text":"","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_4","text":"\u8fd9\u91cc\u6307\u7684\u662f\u542f\u52a8\u7f51\u5173\u7ba1\u7406\u670d\u52a1 1.\u7ec8\u7aef\u4e0b\u542f\u52a8\uff1a jar\u5305\u90e8\u7f72\u76ee\u5f55\u5982\u4e0b\uff1a ``` \u251c\u2500\u2500 conf \u2502 \u251c\u2500\u2500 121000005l35120456.node1 \u9884\u7f6e\u7f51\u5173\u5b9e\u4f8b1\u7684\u914d\u7f6e\u6587\u4ef6 \u2502 \u251c\u2500\u2500 12110107bi45jh675g.node2 \u9884\u7f6e\u7f51\u5173\u5b9e\u4f8b2\u7684\u914d\u7f6e\u6587\u4ef6 \u2502 \u251c\u2500\u2500 logback.xml \u65e5\u5fd7\u7684\u914d\u7f6e\u6587\u4ef6 \u2502 \u2514\u2500\u2500 management \u7f51\u5173\u5b9e\u4f8b\u7ba1\u7406\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6 \u251c\u2500\u2500 jks \u2502 \u251c\u2500\u2500 credence-net \u2502 \u251c\u2500\u2500 identity-net ssl\u65f6\u9700\u8981 \u2502 \u2514\u2500\u2500 management ssl\u65f6\u9700\u8981 \u2514\u2500\u2500 repchain-cross-gateway-assembly-0.1.jar \u53ef\u6267\u884cjar\u5305 ``` \u53ef\u76f4\u63a5\u5c06jar\u5305\u653e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6765\u542f\u52a8\uff0c\u542f\u52a8\u547d\u4ee4\u5982\u4e0b\uff1a java -Dlogback.configurationFile = conf/logback.xml -jar repchain-cross-gateway-assembly-0.1.jar 2.IDEA\u542f\u52a8\uff1a \u76f4\u63a5\u5982\u4e0b\u56fe\u914d\u7f6e\u5373\u53ef \u6ce8\u610f \u5176\u4e2dvm\u53c2\u6570\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\uff1a --add-exports java.base/jdk.internal.misc=ALL-UNNAMED --add-opens java.base/jdk.internal.misc=ALL-UNNAMED -Dio.netty.tryReflectionSetAccessible=true --illegal-access=warn","title":"\u542f\u52a8\u65b9\u5f0f"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_5","text":"GateWayManagement\u7c7b\u4f3c\u4e8eRepChainManagement\uff0c\u542f\u52a8\u7f51\u5173\u7ba1\u7406\u670d\u52a1\uff08\u5373\u8fd0\u884c\u4e0a\u4e00\u5c0f\u8282\u63d0\u5230\u7684\u542f\u52a8\u547d\u4ee4\uff09\u540e\uff0c\u63a5\u7740\u542f\u52a8\u4e00\u4e2aGateWay\u5b9e\u4f8b\uff08\u7c7b\u4f3c\u4e8eRepChain\u8282\u70b9\uff09\uff0c\u5373\u542f\u52a8\u4e00\u4e2a\u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b\uff0c\u5982\u542f\u52a8***.node1\uff0c\u76f8\u5f53\u4e8e\u8d77\u4e86\u4e00\u4e2a\u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b GateWayManagement \u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b\u7ba1\u7406\u670d\u52a1 GateWayManagement\u7684\u914d\u7f6e\u6587\u4ef6\uff1a conf/management/system.conf \u5176\u4e2d\u5e38\u7528\u7684\u914d\u7f6e\u9879\u4e3a\uff1ahttp_service_port = 7081 #http\u670d\u52a1\u7684\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba4\u4e3a7081 \u542f\u52a8GateWay--1\uff08\u53ef\u4ee5\u4eceswagger-ui\u4e0a\u542f\u52a8\uff09 curl -X GET \"http://localhost:7081/management/system/SystemStartup/121000005l35120456.node1\" -H \"accept: text/plain\" GateWayManagement\u7684swagger-ui\u5982\u4e0b\uff1a http://localhost:7081/swagger/index.html \u505c\u6b62GateWay--1\uff08\u53ef\u4ee5\u4eceswagger-ui\u4e0a\u505c\u6b62\uff09 curl -X GET \"http://localhost:7081/management/system/SystemStop/121000005l35120456.node1\" -H \"accept: text/plain\"","title":"\u7f51\u5173\u7ba1\u7406\u670d\u52a1"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_6","text":"\u8de8\u94fe\u7f51\u5173\u76ee\u524d\u5b9e\u73b0\u4e863\u79cd\u7c7b\u578b\u533a\u5757\u94fe\uff08RepChain\u3001Fabric-2.x\u3001FiscoBcos-2.x\uff09\u7684\u9002\u914d\u5668\uff0c\u7528\u6765\u5bf9\u63a5\u5bf9\u5e94\u7684\u76ee\u6807\u94fe \u53ef\u67e5\u8be2repchain\u3001fisco-bcos2.x\u3001fabric-2.x\uff1a\u67e5\u8be2\u533a\u5757\u3001\u533a\u5757\u5934\u3001\u4ea4\u6613\u3001chainInfo \u4ee3\u7406\u5411repchain\u3001fisco-bcos2.x\u3001fabric-2.x\uff1a\u63d0\u4ea4\u4ea4\u6613 GateWay \u8de8\u94fe\u7f51\u5173\u5b9e\u4f8b\uff0c\u901a\u8fc7\u7f51\u5173\u7ba1\u7406\u670d\u52a1\u542f\u52a8\u4e00\u4e2a\u7f51\u5173\u5b9e\u4f8bGateWay--1 GateWay-1\u7684\u914d\u7f6e\u6587\u4ef6\uff1a conf/121000005l35120456.node1/system.conf \u5e38\u7528\u7684\u914d\u7f6e\u9879\uff1ahttp_service_port = 19081 #http\u670d\u52a1\u7684\u7aef\u53e3\u53f7 GateWay--1\u7684swagger-ui\u5982\u4e0b\uff1a http://localhost:19081/swagger/index.html","title":"\u7f51\u5173\u670d\u52a1"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_7","text":"\u76ee\u524d\u5b9e\u73b0\u7684\u7f51\u5173\u63a5\u53e3\u5982\u4e0b\uff0c\u5176\u4ed6\u63a5\u53e3\u4e3a\u9884\u7559\uff0c\u6682\u672a\u5b9e\u73b0 \u63a5\u53e3\u8def\u5f84 \u63a5\u53e3\u8bf4\u660e \u8bf7\u6c42\u65b9\u5f0f /block/hash \u6839\u636e\u533a\u5757hash\u67e5\u8be2\u533a\u5757Json POST /block/header/hash \u6839\u636e\u533a\u5757hash\u67e5\u8be2\u533a\u5757\u5934Json POST /block/height \u6839\u636e\u533a\u5757\u9ad8\u5ea6\u67e5\u8be2\u533a\u5757Json POST /block/header/height \u6839\u636e\u533a\u5757\u9ad8\u5ea6\u67e5\u8be2\u533a\u5757Json POST /block/analyze/height \u6839\u636e\u533a\u5757\u9ad8\u5ea6\u67e5\u8be2\u533a\u5757\uff08\u62bd\u8c61\u51fa\u6765\u7684Block\u6570\u636e\u7ed3\u6784\uff09 POST /chaininfo \u67e5\u8be2\u5bf9\u5e94\u94fe\u7684\u5f53\u524d\u94fe\u9ad8\u5ea6\u548c\u5bf9\u5e94\u7684\u533a\u5757hash POST /transaction/txid \u6839\u636e\u4ea4\u6613ID\u67e5\u8be2\u4ea4\u6613 POST /transaction/postTran \u63d0\u4ea4\u6784\u9020\u4ea4\u6613\u6240\u9700\u7684\u53c2\u6570\uff0c\u4ea4\u7ed9\u7f51\u5173\u6765\u4ee3\u7406\u6784\u9020\u5e76\u63d0\u4ea4\u4ea4\u6613\u5230\u94fe\u4e0a POST /chainconfig \u63d0\u4ea4\u94fe\u914d\u7f6e\uff08\u9002\u914d\u5668\u914d\u7f6e\uff09 POST \u793a\u4f8b\uff1a \u8fd4\u56de\u6210\u529fcode\u4e3a0\uff0c\u5931\u8d25code\u4e3a1 1. /block/hash \u8bf7\u6c42\uff1a { \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"number\" : 7 , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"nonce\" : 0 , \"sha3Uncles\" : null , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"author\" : null , \"sealer\" : \"0x1\" , \"mixHash\" : null , \"extraData\" : [], \"gasLimit\" : 0 , \"gasUsed\" : 0 , \"timestamp\" : 1675138168205 , \"transactions\" : [ { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } ], \"uncles\" : null , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"numberRaw\" : \"0x7\" , \"nonceRaw\" : null , \"gasLimitRaw\" : \"0x0\" , \"timestampRaw\" : \"0x1860603f58d\" , \"gasUsedRaw\" : \"0x0\" } } 2. /block/header/hash \u8bf7\u6c42\uff1a { \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"dbHash\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"extraData\" : [], \"gasLimit\" : \"0x0\" , \"gasUsed\" : \"0x0\" , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"number\" : 7 , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"sealer\" : \"0x1\" , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"signatureList\" : [ { \"index\" : \"0x3\" , \"signature\" : \"0x018c6cd0a281faf42a6bf16f4620f16891015092636bc9ab1b033b9e32bdfb7d52ee532a8949108fc09516f49d20e0f5bee2e7260f8771be05e14a59978b770000\" }, { \"index\" : \"0x2\" , \"signature\" : \"0xf01fc506aba99ccdf7dc1539cd05aee44588ea583db685a2a09f2b74a78ada0a64a33bdddc49c35a1e881ebd2bd7f580f556dfbf7d3ddcfa4c8ad783dd9451d001\" }, { \"index\" : \"0x0\" , \"signature\" : \"0xb88b6d30b4d2e68f71d1c6e40d108632bbea791bb6589aa5ba5f13d5df241341033dc9efd509612769957440a419701f413fe88dcd71c318b05e145eebbfb10300\" } ], \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"timestamp\" : \"0x1860603f58d\" , \"numberRaw\" : \"7\" } } 3. /block/height \u8bf7\u6c42\uff1a { \"height\" : 7 , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"number\" : 7 , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"nonce\" : 0 , \"sha3Uncles\" : null , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"author\" : null , \"sealer\" : \"0x1\" , \"mixHash\" : null , \"extraData\" : [], \"gasLimit\" : 0 , \"gasUsed\" : 0 , \"timestamp\" : 1675138168205 , \"transactions\" : [ { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } ], \"uncles\" : null , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"numberRaw\" : \"0x7\" , \"nonceRaw\" : null , \"gasLimitRaw\" : \"0x0\" , \"timestampRaw\" : \"0x1860603f58d\" , \"gasUsedRaw\" : \"0x0\" } } 4. /block/header/height \u8bf7\u6c42\uff1a { \"height\" : 7 , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"dbHash\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"extraData\" : [], \"gasLimit\" : \"0x0\" , \"gasUsed\" : \"0x0\" , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"number\" : 7 , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"sealer\" : \"0x1\" , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"signatureList\" : [ { \"index\" : \"0x3\" , \"signature\" : \"0x018c6cd0a281faf42a6bf16f4620f16891015092636bc9ab1b033b9e32bdfb7d52ee532a8949108fc09516f49d20e0f5bee2e7260f8771be05e14a59978b770000\" }, { \"index\" : \"0x2\" , \"signature\" : \"0xf01fc506aba99ccdf7dc1539cd05aee44588ea583db685a2a09f2b74a78ada0a64a33bdddc49c35a1e881ebd2bd7f580f556dfbf7d3ddcfa4c8ad783dd9451d001\" }, { \"index\" : \"0x0\" , \"signature\" : \"0xb88b6d30b4d2e68f71d1c6e40d108632bbea791bb6589aa5ba5f13d5df241341033dc9efd509612769957440a419701f413fe88dcd71c318b05e145eebbfb10300\" } ], \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"timestamp\" : \"0x1860603f58d\" , \"numberRaw\" : \"7\" } } 5. /block/analyze/height \u54cd\u5e94\u8fd4\u56de\u7684\u662f\u81ea\u5b9a\u4e49\u7684Block\u6570\u636e\u7ed3\u6784\uff0crawBlock\u4e3a\u539f\u59cbBlockJsonString \u8bf7\u6c42\uff1a { \"height\" : 7 , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"adapterId\" : \"74e8089786e54f859112d20666719ac6\" , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"prevHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"height\" : 7 , \"timeStamp\" : \"1675138168205\" , \"tranIds\" : [ \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" ], \"trans\" : null , \"rawBlock\" : { \"number\" : 7 , \"hash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"parentHash\" : \"0xb7a203f59fc0fa9e9c8f582cc8ec8120eab8f534c2edfd76263a845f9b6211eb\" , \"nonce\" : 0 , \"sha3Uncles\" : null , \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\" , \"transactionsRoot\" : \"0xc2df033db34f57cdabbd83ac15cd02a5ebba2f50d7e7c76a0827aff406752707\" , \"stateRoot\" : \"0xab710c2d29b0dc7a578697e2ee376a610e604b910c462b4b2e4dca6f322d06d7\" , \"receiptsRoot\" : \"0x15edbbf89498b882d934e58b7e947790a1a6525d152ccfdef2d075082f50b7e5\" , \"author\" : null , \"sealer\" : \"0x1\" , \"mixHash\" : null , \"extraData\" : [], \"gasLimit\" : 0 , \"gasUsed\" : 0 , \"timestamp\" : 1675138168205 , \"transactions\" : [ { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } ], \"uncles\" : null , \"sealerList\" : [ \"3f0bd8b2473afe620b5acdf3c9f2386a6fd0a842c9ec7178fe2afd0509e5033dce4feff07c55491bdec26e439147c88e1d235a8a60f223c1d0bced74ee8e627d\" , \"4af881f42741082500bd8c3e6c7d0c3c6074c8d7bbd333cb2bb346f7ab8c9c99401276088ab7a80a588298ca8c8c18d95e342181f7d650b6890a9eec4ef789d3\" , \"7bf4a65cec1e16a4044fafb4c2620ac281316deb17f5b863d98de5d117c9e1907f69e7bf0a4dbef3c78635aefefcf3195d47e18f267528bcd6b48c7dfcd82332\" , \"b28de33b2b20421f9ca2658e36826bd1717666e7daa6fe05ae54754bdbcfc789d3d94143696a387aa9099cf6176b1014b8e06d110de4c6a5dca8a2a9d367f49a\" ], \"numberRaw\" : \"0x7\" , \"nonceRaw\" : null , \"gasLimitRaw\" : \"0x0\" , \"timestampRaw\" : \"0x1860603f58d\" , \"gasUsedRaw\" : \"0x0\" } } } 6. /chaininfo \u8bf7\u6c42\uff1a { \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"height\" : 229 , \"totalTransNumber\" : 965 } } 7. /transaction/txid \u8bf7\u6c42\uff1a { \"txid\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"adapterInfo\" : { \"id\" : \"74e8089786e54f859112d20666719ac6\" , \"type\" : \"FiscoBcos-2.x\" } } \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : { \"hash\" : \"0x4ae16a0543115815d1d6414babd86eec5238f8311adfd3b3f102f6ba68f1b610\" , \"nonce\" : 7.335514695094679e+74 , \"blockHash\" : \"0xe2bf503cfcb9ba5a9c06f4937a1be64499c670f0f149f2a86a2c686df898cf9b\" , \"blockNumber\" : 7 , \"transactionIndex\" : 0 , \"from\" : \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" , \"to\" : \"0x1c5272691b76d6d52afa4276ab083e97bb031f44\" , \"value\" : 0 , \"gasPrice\" : 300000000 , \"gas\" : 300000000 , \"input\" : \"0x4ed3885e0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000003348656c6c6f2c20464953434f2042434f532c20303265393734316436383665346239626164346434613965396164396361303500000000000000000000000000\" , \"creates\" : null , \"publicKey\" : null , \"raw\" : null , \"r\" : null , \"s\" : null , \"v\" : 0 , \"valueRaw\" : \"0x0\" , \"gasPriceRaw\" : \"0x11e1a300\" , \"gasRaw\" : \"0x11e1a300\" , \"nonceRaw\" : \"0x19f2ce839ba92fd87f10bf8b58870abca69aa4891a591e0285bdc0608156f02\" , \"transactionIndexRaw\" : \"0x0\" , \"blockNumberRaw\" : \"0x7\" } } 8. /chainconfig \u63d0\u4ea4/\u66f4\u65b0\u9002\u914d\u5668\u7684\u914d\u7f6e\u6587\u4ef6 \u8bf7\u6c42\uff0c f orm - da ta \uff1a adap ter Id : S tr i n g co nf igZip : File/Bi nar y \u54cd\u5e94\uff1a { \"code\" : 0 , \"msg\" : \"success\" , \"data\" : \"79e5d00cc30f40d3a857ec4511c4fa4e.zip\" }","title":"\u7f51\u5173\u63a5\u53e3"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/06.GateWay/#_8","text":"","title":""},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/07.CrossChainManage/","text":"\u5408\u7ea6\u4ecb\u7ecd package rep . sc . tpl . cross import CrossManage .{ chainInfoPrefix , contractInfoPrefix , crossTranPrefix , crossTranReceiptPrefix , routeInfoPrefix , userPermitRoutePrefix } import org . json4s . DefaultFormats import org . json4s . jackson . JsonMethods . parse import org . json4s . jackson . Serialization .{ read , write } import org . slf4j . Logger import rep . proto . rc2 . ActionResult import rep . sc . scalax .{ ContractContext , ContractException , IContract } /** * * @param chainHash \u94fe\u6216\u9002\u914d\u5668ID * @param chainType \u94fe\u7c7b\u578b fabric/repchain/fisco-bcos * @param consensusNodeUrlList \u8282\u70b9\u7684ip:port * @param adapterName \u9002\u914d\u5668\u540d */ case class ChainInfo ( chainHash : String , chainType : Int , configPath : String , consensusNodeUrlList : Option [ String ], adapterName : String ) /** * * @param contractHash \u5408\u7ea6ID * @param chainHash \u94fe\u6216\u9002\u914d\u5668ID * @param contractName \u5408\u7ea6\u63cf\u8ff0 * @param contractAddr \u5408\u7ea6\u5730\u5740 */ case class ContractInfo ( contractHash : String , chainHash : String , contractName : String , contractAddr : String ) /** * * @param routeHash \u8def\u7531ID * @param routeName \u8def\u7531\u63cf\u8ff0 * @param contractHashFrom \u539f\u5408\u7ea6ID * @param contractHashTo \u76ee\u6807\u5408\u7ea6ID */ case class RouteInfo ( routeHash : String , routeName : String , contractHashFrom : String , contractHashTo : String ) /** * * @param creditCode \u7528\u6237ID * @param routeSeq \u8def\u7531\u5e8f\u5217 */ case class PermitRoute ( creditCode : String , routeSeq : Seq [ String ]) /** * * @param chainHash \u94feID * @param routeHash \u8def\u7531ID * @param accountId \u8d26\u6237ID * @param methodName \u65b9\u6cd5\u540d * @param methodArgs \u65b9\u6cd5\u53c2\u6570 */ case class CrossTransaction ( chainHash : String , routeHash : String , accountId : String , methodName : String , methodArgs : String ) /** * * @param chainHash \u94feID * @param crossTranHashSrc \u4ee3\u7406\u4ea4\u6613\u7684hash * @param crossTranHash \u76ee\u6807\u94fe\u4ea4\u6613Hash */ case class CrossTransactionReceipt ( chainHash : String , crossTranHashSrc : String , crossTranHash : String ) /** * @author zyf */ class CrossChainManage extends IContract { implicit val formats : DefaultFormats . type = DefaultFormats var logger : Logger = _ def init ( ctx : ContractContext ): Unit = { this . logger = ctx . api . getLogger logger . info ( s\"init | \u521d\u59cb\u5316\u8de8\u94fe\u7ba1\u7406\u5408\u7ea6\uff1a ${ ctx . t . cid . get . chaincodeName } , \u4ea4\u6613ID\u4e3a\uff1a ${ ctx . t . id } \" ) } /** * \u767b\u8bb0chainInfo * * @param ctx * @param sdata * @return */ def registerChainInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val chainInfo = parse ( sdata ). extract [ ChainInfo ] logger . info ( \"registerChainInfo | chainInfo: {}\" , sdata ) val chainInfoKey = chainInfoPrefix + chainInfo . chainHash if ( ctx . api . getVal ( chainInfoKey ) != null ) { logger . error ( s\"registerChainInfo | \u5df2\u7ecf\u6709\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528updateChainInfo\" ) throw ContractException ( s\"registerChainInfo | \u5df2\u7ecf\u6709\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528updateChainInfo\" ) } ctx . api . setVal ( chainInfoKey , sdata ) ActionResult () } /** * \u66f4\u65b0chainInfo * * @param ctx * @param sdata * @return */ def updateChainInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val chainInfo = parse ( sdata ). extract [ ChainInfo ] logger . info ( \"updateChainInfo | chainInfo: {}\" , sdata ) val chainInfoKey = chainInfoPrefix + chainInfo . chainHash if ( ctx . api . getVal ( chainInfoKey ) == null ) { logger . error ( s\"updateChainInfo | \u4e0d\u5b58\u5728\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528registerChainInfo\" ) throw ContractException ( s\"updateChainInfo | \u4e0d\u5b58\u5728\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528registerChainInfo\" ) } ctx . api . setVal ( chainInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def registerContractInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val contractInfo = parse ( sdata ). extract [ ContractInfo ] logger . info ( \"registerContractInfo | contractInfo: {}\" , sdata ) val contractInfoKey = contractInfoPrefix + contractInfo . contractHash if ( ctx . api . getVal ( contractInfoKey ) != null ) { logger . error ( s\"registerContractInfo | \u5df2\u7ecf\u6709\u8be5id ${ contractInfo . contractHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) throw ContractException ( s\"registerContractInfo | \u5df2\u7ecf\u6709\u8be5id ${ contractInfo . contractHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) } ctx . api . setVal ( contractInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def registerRouterInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val routeInfo = parse ( sdata ). extract [ RouteInfo ] logger . info ( \"registerRouterInfo | routeInfo: {}\" , sdata ) val routeInfoKey = routeInfoPrefix + routeInfo . routeHash if ( ctx . api . getVal ( routeInfoKey ) != null ) { logger . error ( s\"registerRouterInfo | \u5df2\u7ecf\u6709\u8be5id ${ routeInfo . routeHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) throw ContractException ( s\"registerRouterInfo | \u5df2\u7ecf\u6709\u8be5id ${ routeInfo . routeHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) } ctx . api . setVal ( routeInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def registerPermitRoute ( ctx : ContractContext , sdata : String ): ActionResult = { val permitInfo = parse ( sdata ). extract [ PermitRoute ] logger . info ( \"registerPermitRoute | permitInfo: {}\" , sdata ) val permitInfoKey = userPermitRoutePrefix + permitInfo . creditCode ctx . api . setVal ( permitInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def updatePermitRoute ( ctx : ContractContext , sdata : String ): ActionResult = { val permitInfo = parse ( sdata ). extract [ PermitRoute ] logger . info ( \"updatePermitChain | permitInfo: {}\" , sdata ) val permitInfoKey = userPermitRoutePrefix + permitInfo . creditCode ctx . api . setVal ( permitInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def submitCrossProxyTran ( ctx : ContractContext , sdata : String ): ActionResult = { val permitInfoKey = userPermitRoutePrefix + ctx . t . getSignature . getCertId . creditCode val permitInfo = parse ( ctx . api . getVal ( permitInfoKey ). asInstanceOf [ String ]). extract [ PermitRoute ] val crossTran = parse ( sdata ). extract [ CrossTransaction ] logger . info ( s\"submitCrossProxyTran | crossTran: $ sdata , permitInfo: ${ write ( permitInfo ) } \" ) if ( permitInfo . routeSeq . contains ( crossTran . routeHash )) { val routeInfo = parse ( ctx . api . getVal ( routeInfoPrefix + crossTran . routeHash ). asInstanceOf [ String ]). extract [ RouteInfo ] val contractHashTo = routeInfo . contractHashTo logger . info ( s\"submitCrossProxyTran | \u6709\u5411\u8def\u7531 ${ write ( routeInfo ) } \u5408\u7ea6 $ contractHashTo \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u7684\u6743\u9650\" ) ctx . api . setVal ( crossTranPrefix + ctx . t . id , sdata ) } else { logger . error ( s\"submitCrossProxyTran | \u4e0d\u5177\u6709\u5411\u94fe ${ crossTran . chainHash } \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u7684\u6743\u9650\" ) throw ContractException ( s\"submitCrossProxyTran | \u4e0d\u5177\u6709\u5411\u94fe ${ crossTran . chainHash } \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u7684\u6743\u9650\" ) } ActionResult () } /** * * @param ctx * @param sdata * @return */ def submitCrossProxyReceipt ( ctx : ContractContext , sdata : String ): ActionResult = { val crossTranReceipt = parse ( sdata ). extract [ CrossTransactionReceipt ] logger . info ( \"submitCrossProxyReceipt | receipt: {}\" , sdata ) ctx . api . setVal ( crossTranReceiptPrefix + crossTranReceipt . crossTranHash , write ( parse ( sdata ) merge parse ( s\"\"\"{\"receiptTranHash\":\" ${ ctx . t . id } \"}\"\"\" ))) ActionResult () } def onAction ( ctx : ContractContext , action : String , sdata : String ): ActionResult = { action match { case \"registerChainInfo\" => registerChainInfo ( ctx , sdata ) case \"updateChainInfo\" => updateChainInfo ( ctx , sdata ) case \"registerContractInfo\" => registerContractInfo ( ctx , sdata ) case \"registerRouterInfo\" => registerRouterInfo ( ctx , sdata ) case \"registerPermitRoute\" => registerPermitRoute ( ctx , sdata ) case \"updatePermitRoute\" => updatePermitRoute ( ctx , sdata ) case \"submitCrossProxyTran\" => submitCrossProxyTran ( ctx , sdata ) case \"submitCrossProxyReceipt\" => submitCrossProxyReceipt ( ctx , sdata ) case _ => throw ContractException ( \"\u8be5\u5408\u7ea6\u6ca1\u6709\u6539\u65b9\u6cd5\" ) } } } \u5408\u7ea6\u65b9\u6cd5\u4ecb\u7ecd registerChainInfo\uff1a\u6ce8\u518cchainInfo\uff0c\u65b9\u4fbf\u540e\u7eed\u548c\u7f51\u5173\u5bf9\u63a5\uff0c\u6765\u6e90\u94fe\u548c\u76ee\u6807\u94fe\u90fd\u6ce8\u518c\uff08\u5305\u62ec\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff09\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740\u8c03\u7528\u7684Storage\u6a21\u5757\uff08cross-storage\uff09\u8fdb\u884c\u5b58\u50a8\u5206\u6790\uff0c\u82e5Storage\u6a21\u5757\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u4f1a\u5c06\u914d\u7f6e\u6587\u4ef6\u63d0\u4ea4\u5230\u7f51\u5173\u3002 updateChainInfo\uff1a\u66f4\u65b0chainInfo\uff0c\u4e00\u822c\u7528\u6765\u66f4\u65b0\u8de8\u94fe\u7f51\u5173\u4e2d\u5bf9\u5e94\u76ee\u6807\u94fe\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u4f1a\u5c06\u914d\u7f6e\u6587\u4ef6\u63d0\u4ea4\u5230\u7f51\u5173\u3002 registerContractInfo\uff1a\u6ce8\u518ccontractInfo\uff0c\u6ce8\u518c\u76ee\u6807\u94fe\u5408\u7ea6\uff08\u8981\u8de8\u7684\u5408\u7ea6\u4fe1\u606f\uff09\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 registerRouterInfo\uff1a\u6ce8\u518crouteInfo\uff0c\u8def\u7531\u4fe1\u606f\uff0c\u539f\u94fe\u7684\u5408\u7ea6\u5230\u76ee\u6807\u94fe\u5408\u7ea6\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 registerPermitRoute\uff1a\u6ce8\u518cpermitRoute\uff0c\u7ba1\u7406\u5458\u4e3a\u7528\u6237\u6ce8\u518c\u5141\u8bb8\u7684\u8def\u7531\u4fe1\u606f\uff0c\u4e00\u4e2a\u7528\u6237\u540d\u4e0b\u90fd\u6709\u54ea\u4e9brouteinfo\uff0c\u5728\u7528\u6237\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u65f6\uff0c\u5408\u7ea6\u91cc\u4f1a\u6821\u9a8c\uff0c\u8be5\u7528\u6237\u6709\u6ca1\u6709\u5411\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613\u7684\u6743\u9650\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 updatePermitRoute\uff1a\u66f4\u65b0permitRoute\uff0c\u66f4\u65b0\u7528\u6237\u7684\u8def\u7531\u6743\u9650\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 submitCrossProxyTran\uff1a\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613crossProxyTran\uff0c\u7528\u6237\u60f3repchain\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u4f1a\u7ec4\u7ec7\u4ea4\u6613\u53c2\u6570\uff0c\u7136\u540e\u63d0\u4ea4\u5230\u7f51\u5173\uff0c\u7531\u7f51\u5173\u6784\u9020\u4ee3\u7406\u7b7e\u540d\u4ea4\u6613\u63d0\u4ea4\u5230\u5bf9\u5e94\u7684\u76ee\u6807\u94fe\u3002 submitCrossProxyReceipt\uff1a\u63d0\u4ea4\u5bf9\u5e94\u7684\u56de\u6267crossProxyReceipt\uff0c\u8be5\u65b9\u6cd5\u7531Storage\u6a21\u5757\u8c03\u7528\uff0c\u540c\u6b65\u76ee\u6807\u94fe\u533a\u5757\u65f6\uff0c\u5982\u679c\u540c\u6b65\u5b58\u50a8\u6a21\u5757\u76d1\u6d4b\u5230\u4e0a\u4e00\u6b65\u7684\u4ea4\u6613\u51fa\u5757\u4e86\uff0c\u90a3\u4e48\u5411repchain\u63d0\u4ea4\u4e00\u4e2a\u56de\u6267\u4fe1\u606f\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230 \u76ee\u6807\u94fe\u7684\u533a\u5757 \u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u63d0\u4ea4\u4e00\u4e2a\u56de\u6267\u4ea4\u6613\u5230\u6765\u6e90\u94feRepChain\u4e0a\u3002 \u6d4b\u8bd5\u4ecb\u7ecd \u4ee3\u7801\u5728repchain-cross-storage/src/main/test\u76ee\u5f55\u4e0b \u8de8\u94fe\u7f51\u5173\u5fc5\u9700\u7684\u4e24\u4e2a\u8bf7\u6c42\u53c2\u6570\uff1achain_hash\uff1a\u94feid\uff0c\u5bf9\u5e94\u4e8eadapterId\uff1bchain_type\uff1a\u94fe\u7c7b\u578b\u540d \u5176\u4e2d\u6d4b\u8bd5\u4f8b\u4e2d\u6d89\u53ca\u5230\u7684zip\u6587\u4ef6\uff0c\u5728repchain-cross-gateway/conf\u4e0b\u81ea\u884c\u6253\u5305 \u542f\u52a8\u8de8\u94fe\u7f51\u5173 \u542f\u52a8GateWayManagement \u542f\u52a8GateWay \u6267\u884c\u6d4b\u8bd5\u4f8binitRepChain()\uff0c\u4e0a\u4f20RepChain\u914d\u7f6e\u6587\u4ef6 \u6267\u884c\u6d4b\u8bd5\u4f8btestRepSyncService()\uff0c\u542f\u52a8\u540c\u6b65RepChain\u7684\u670d\u52a1\uff0c\u6ce8\u610f\u9ad8\u5ea6\u548chash\u7684\u8bbe\u7f6e\uff08\u53ef\u4ee5\u67e5\u770b\u6570\u636e\u5e93\uff09 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterRepChainChaintInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518cRepChain\u81ea\u8eab\u94fe\u4fe1\u606f \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterFsicoChaintInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518cFisco\u94fe\u4fe1\u606f \u6267\u884c\u6d4b\u8bd5\u4f8btestFiscoSyncService()\uff0c\u542f\u52a8\u540c\u6b65FiscoBcos\u7684\u670d\u52a1\uff0c\u6ce8\u610f\u9ad8\u5ea6\u548chash\u7684\u8bbe\u7f6e\uff08\u53ef\u4ee5\u67e5\u770b\u6570\u636e\u5e93\uff09 \u6267\u884c\u6d4b\u8bd5\u4f8btestUpdateFiscoChaintInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u66f4\u65b0Fisco\u94fe\u4fe1\u606f\uff0c\u4e00\u822c\u662f\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\uff0c\u624d\u66f4\u65b0chainInfo \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterContractInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518c\u5408\u7ea6\u4fe1\u606f\uff0c\u8fd9\u91cc\u4ee5FiscoBcos\u4e0a\u90e8\u7f72\u7684HelloWorld\u4e3a\u4f8b \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterRouteInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518c\u8def\u7531\u4fe1\u606f\uff0c\u8fd9\u91cc\u4e3b\u8981\u662f\u8bf4\u4ece\u54ea\u4e2a\u5408\u7ea6\u8de8\u5230\u54ea\u4e2a\u5408\u7ea6 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterPermitRoute()\uff0c\u5411RepChain\u63d0\u4ea4\u8def\u7531\u6743\u9650\u767b\u8bb0\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bf4\u662f\u5141\u8bb8\u67d0\u4e2a\u7528\u6237\u67d0\u4e2a\u8def\u7531 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterFiscoSubmitCross()\uff0c\u5411FiscoBcos\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\uff0cRepChain\u5b58\u50a8\u6a21\u5757\u4f1a\u89e3\u6790\u533a\u5757\uff0c\u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u53c2\u6570\u5411\u76ee\u6807\u94fe\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff1bFisco\u5b58\u50a8\u6a21\u5757\u4e5f\u4f1a\u89e3\u6790\u5bf9\u5e94\u7684\u533a\u5757\uff0c\u63d0\u4ea4\u56de\u6267\u5230RepChain\u4e0a \u6839\u636echainHash\u6765\u660e\u786e\u662f\u5411\u6765\u6e90\u94fe\u8fd8\u662f\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613 \u6839\u636eaccountId\u6765\u9009\u62e9\u4f7f\u7528\u7f51\u5173\u5904\u7684\u54ea\u4e00\u4e2a\u8d26\u6237\u63d0\u4ea4\u4ea4\u6613 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterFiscoSubmitCross_1()\uff0c\u5411FiscoBcos\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613( \u4f7f\u7528\u548c11\u4e0d\u540c\u7684\u79c1\u94a5 \uff0c\u901a\u8fc7accountId\u6765\u6307\u5b9a)\uff0cRepChain\u5b58\u50a8\u6a21\u5757\u4f1a\u89e3\u6790\u533a\u5757\uff0c\u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u53c2\u6570\u5411\u76ee\u6807\u94fe\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff1bFisco\u5b58\u50a8\u6a21\u5757\u4e5f\u4f1a\u89e3\u6790\u5bf9\u5e94\u7684\u533a\u5757\uff0c\u63d0\u4ea4\u56de\u6267\u5230RepChain\u4e0a \u6839\u636echainHash\u6765\u660e\u786e\u662f\u5411\u6765\u6e90\u94fe\u8fd8\u662f\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613 \u6839\u636eaccountId\u6765\u9009\u62e9\u4f7f\u7528\u7f51\u5173\u5904\u7684\u54ea\u4e00\u4e2a\u8d26\u6237\u63d0\u4ea4\u4ea4\u6613 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterRepChainSubmitCross_1()\uff0c\u5411RepChain\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\uff0cRepChain\u5b58\u50a8\u6a21\u5757\u4f1a\u89e3\u6790\u533a\u5757\uff0c\u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u53c2\u6570\u5411\u6765\u6e90\u94fe\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff1bRepChain\u5b58\u50a8\u6a21\u5757\u4e5f\u4f1a\u89e3\u6790\u5bf9\u5e94\u7684\u533a\u5757\uff0c\u63d0\u4ea4\u56de\u6267\u5230RepChain\u4e0a \u6839\u636echainHash\u6765\u660e\u786e\u662f\u5411\u6765\u6e90\u94fe\u8fd8\u662f\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613 \u6839\u636eaccountId\u6765\u9009\u62e9\u4f7f\u7528\u7f51\u5173\u5904\u7684\u54ea\u4e00\u4e2a\u8d26\u6237\u63d0\u4ea4\u4ea4\u6613","title":"\u8de8\u94fe\u7ba1\u7406\u5408\u7ea6"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/07.CrossChainManage/#_1","text":"package rep . sc . tpl . cross import CrossManage .{ chainInfoPrefix , contractInfoPrefix , crossTranPrefix , crossTranReceiptPrefix , routeInfoPrefix , userPermitRoutePrefix } import org . json4s . DefaultFormats import org . json4s . jackson . JsonMethods . parse import org . json4s . jackson . Serialization .{ read , write } import org . slf4j . Logger import rep . proto . rc2 . ActionResult import rep . sc . scalax .{ ContractContext , ContractException , IContract } /** * * @param chainHash \u94fe\u6216\u9002\u914d\u5668ID * @param chainType \u94fe\u7c7b\u578b fabric/repchain/fisco-bcos * @param consensusNodeUrlList \u8282\u70b9\u7684ip:port * @param adapterName \u9002\u914d\u5668\u540d */ case class ChainInfo ( chainHash : String , chainType : Int , configPath : String , consensusNodeUrlList : Option [ String ], adapterName : String ) /** * * @param contractHash \u5408\u7ea6ID * @param chainHash \u94fe\u6216\u9002\u914d\u5668ID * @param contractName \u5408\u7ea6\u63cf\u8ff0 * @param contractAddr \u5408\u7ea6\u5730\u5740 */ case class ContractInfo ( contractHash : String , chainHash : String , contractName : String , contractAddr : String ) /** * * @param routeHash \u8def\u7531ID * @param routeName \u8def\u7531\u63cf\u8ff0 * @param contractHashFrom \u539f\u5408\u7ea6ID * @param contractHashTo \u76ee\u6807\u5408\u7ea6ID */ case class RouteInfo ( routeHash : String , routeName : String , contractHashFrom : String , contractHashTo : String ) /** * * @param creditCode \u7528\u6237ID * @param routeSeq \u8def\u7531\u5e8f\u5217 */ case class PermitRoute ( creditCode : String , routeSeq : Seq [ String ]) /** * * @param chainHash \u94feID * @param routeHash \u8def\u7531ID * @param accountId \u8d26\u6237ID * @param methodName \u65b9\u6cd5\u540d * @param methodArgs \u65b9\u6cd5\u53c2\u6570 */ case class CrossTransaction ( chainHash : String , routeHash : String , accountId : String , methodName : String , methodArgs : String ) /** * * @param chainHash \u94feID * @param crossTranHashSrc \u4ee3\u7406\u4ea4\u6613\u7684hash * @param crossTranHash \u76ee\u6807\u94fe\u4ea4\u6613Hash */ case class CrossTransactionReceipt ( chainHash : String , crossTranHashSrc : String , crossTranHash : String ) /** * @author zyf */ class CrossChainManage extends IContract { implicit val formats : DefaultFormats . type = DefaultFormats var logger : Logger = _ def init ( ctx : ContractContext ): Unit = { this . logger = ctx . api . getLogger logger . info ( s\"init | \u521d\u59cb\u5316\u8de8\u94fe\u7ba1\u7406\u5408\u7ea6\uff1a ${ ctx . t . cid . get . chaincodeName } , \u4ea4\u6613ID\u4e3a\uff1a ${ ctx . t . id } \" ) } /** * \u767b\u8bb0chainInfo * * @param ctx * @param sdata * @return */ def registerChainInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val chainInfo = parse ( sdata ). extract [ ChainInfo ] logger . info ( \"registerChainInfo | chainInfo: {}\" , sdata ) val chainInfoKey = chainInfoPrefix + chainInfo . chainHash if ( ctx . api . getVal ( chainInfoKey ) != null ) { logger . error ( s\"registerChainInfo | \u5df2\u7ecf\u6709\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528updateChainInfo\" ) throw ContractException ( s\"registerChainInfo | \u5df2\u7ecf\u6709\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528updateChainInfo\" ) } ctx . api . setVal ( chainInfoKey , sdata ) ActionResult () } /** * \u66f4\u65b0chainInfo * * @param ctx * @param sdata * @return */ def updateChainInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val chainInfo = parse ( sdata ). extract [ ChainInfo ] logger . info ( \"updateChainInfo | chainInfo: {}\" , sdata ) val chainInfoKey = chainInfoPrefix + chainInfo . chainHash if ( ctx . api . getVal ( chainInfoKey ) == null ) { logger . error ( s\"updateChainInfo | \u4e0d\u5b58\u5728\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528registerChainInfo\" ) throw ContractException ( s\"updateChainInfo | \u4e0d\u5b58\u5728\u8be5id ${ chainInfo . chainHash } \u4e86\uff0c\u8bf7\u4f7f\u7528registerChainInfo\" ) } ctx . api . setVal ( chainInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def registerContractInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val contractInfo = parse ( sdata ). extract [ ContractInfo ] logger . info ( \"registerContractInfo | contractInfo: {}\" , sdata ) val contractInfoKey = contractInfoPrefix + contractInfo . contractHash if ( ctx . api . getVal ( contractInfoKey ) != null ) { logger . error ( s\"registerContractInfo | \u5df2\u7ecf\u6709\u8be5id ${ contractInfo . contractHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) throw ContractException ( s\"registerContractInfo | \u5df2\u7ecf\u6709\u8be5id ${ contractInfo . contractHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) } ctx . api . setVal ( contractInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def registerRouterInfo ( ctx : ContractContext , sdata : String ): ActionResult = { val routeInfo = parse ( sdata ). extract [ RouteInfo ] logger . info ( \"registerRouterInfo | routeInfo: {}\" , sdata ) val routeInfoKey = routeInfoPrefix + routeInfo . routeHash if ( ctx . api . getVal ( routeInfoKey ) != null ) { logger . error ( s\"registerRouterInfo | \u5df2\u7ecf\u6709\u8be5id ${ routeInfo . routeHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) throw ContractException ( s\"registerRouterInfo | \u5df2\u7ecf\u6709\u8be5id ${ routeInfo . routeHash } \u4e86\uff0c\u6682\u4e0d\u652f\u6301\u91cd\u590d\u767b\u8bb0\u6216\u66f4\u65b0\" ) } ctx . api . setVal ( routeInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def registerPermitRoute ( ctx : ContractContext , sdata : String ): ActionResult = { val permitInfo = parse ( sdata ). extract [ PermitRoute ] logger . info ( \"registerPermitRoute | permitInfo: {}\" , sdata ) val permitInfoKey = userPermitRoutePrefix + permitInfo . creditCode ctx . api . setVal ( permitInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def updatePermitRoute ( ctx : ContractContext , sdata : String ): ActionResult = { val permitInfo = parse ( sdata ). extract [ PermitRoute ] logger . info ( \"updatePermitChain | permitInfo: {}\" , sdata ) val permitInfoKey = userPermitRoutePrefix + permitInfo . creditCode ctx . api . setVal ( permitInfoKey , sdata ) ActionResult () } /** * * @param ctx * @param sdata * @return */ def submitCrossProxyTran ( ctx : ContractContext , sdata : String ): ActionResult = { val permitInfoKey = userPermitRoutePrefix + ctx . t . getSignature . getCertId . creditCode val permitInfo = parse ( ctx . api . getVal ( permitInfoKey ). asInstanceOf [ String ]). extract [ PermitRoute ] val crossTran = parse ( sdata ). extract [ CrossTransaction ] logger . info ( s\"submitCrossProxyTran | crossTran: $ sdata , permitInfo: ${ write ( permitInfo ) } \" ) if ( permitInfo . routeSeq . contains ( crossTran . routeHash )) { val routeInfo = parse ( ctx . api . getVal ( routeInfoPrefix + crossTran . routeHash ). asInstanceOf [ String ]). extract [ RouteInfo ] val contractHashTo = routeInfo . contractHashTo logger . info ( s\"submitCrossProxyTran | \u6709\u5411\u8def\u7531 ${ write ( routeInfo ) } \u5408\u7ea6 $ contractHashTo \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u7684\u6743\u9650\" ) ctx . api . setVal ( crossTranPrefix + ctx . t . id , sdata ) } else { logger . error ( s\"submitCrossProxyTran | \u4e0d\u5177\u6709\u5411\u94fe ${ crossTran . chainHash } \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u7684\u6743\u9650\" ) throw ContractException ( s\"submitCrossProxyTran | \u4e0d\u5177\u6709\u5411\u94fe ${ crossTran . chainHash } \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u7684\u6743\u9650\" ) } ActionResult () } /** * * @param ctx * @param sdata * @return */ def submitCrossProxyReceipt ( ctx : ContractContext , sdata : String ): ActionResult = { val crossTranReceipt = parse ( sdata ). extract [ CrossTransactionReceipt ] logger . info ( \"submitCrossProxyReceipt | receipt: {}\" , sdata ) ctx . api . setVal ( crossTranReceiptPrefix + crossTranReceipt . crossTranHash , write ( parse ( sdata ) merge parse ( s\"\"\"{\"receiptTranHash\":\" ${ ctx . t . id } \"}\"\"\" ))) ActionResult () } def onAction ( ctx : ContractContext , action : String , sdata : String ): ActionResult = { action match { case \"registerChainInfo\" => registerChainInfo ( ctx , sdata ) case \"updateChainInfo\" => updateChainInfo ( ctx , sdata ) case \"registerContractInfo\" => registerContractInfo ( ctx , sdata ) case \"registerRouterInfo\" => registerRouterInfo ( ctx , sdata ) case \"registerPermitRoute\" => registerPermitRoute ( ctx , sdata ) case \"updatePermitRoute\" => updatePermitRoute ( ctx , sdata ) case \"submitCrossProxyTran\" => submitCrossProxyTran ( ctx , sdata ) case \"submitCrossProxyReceipt\" => submitCrossProxyReceipt ( ctx , sdata ) case _ => throw ContractException ( \"\u8be5\u5408\u7ea6\u6ca1\u6709\u6539\u65b9\u6cd5\" ) } } }","title":"\u5408\u7ea6\u4ecb\u7ecd"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/07.CrossChainManage/#_2","text":"registerChainInfo\uff1a\u6ce8\u518cchainInfo\uff0c\u65b9\u4fbf\u540e\u7eed\u548c\u7f51\u5173\u5bf9\u63a5\uff0c\u6765\u6e90\u94fe\u548c\u76ee\u6807\u94fe\u90fd\u6ce8\u518c\uff08\u5305\u62ec\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff09\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740\u8c03\u7528\u7684Storage\u6a21\u5757\uff08cross-storage\uff09\u8fdb\u884c\u5b58\u50a8\u5206\u6790\uff0c\u82e5Storage\u6a21\u5757\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u4f1a\u5c06\u914d\u7f6e\u6587\u4ef6\u63d0\u4ea4\u5230\u7f51\u5173\u3002 updateChainInfo\uff1a\u66f4\u65b0chainInfo\uff0c\u4e00\u822c\u7528\u6765\u66f4\u65b0\u8de8\u94fe\u7f51\u5173\u4e2d\u5bf9\u5e94\u76ee\u6807\u94fe\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u4f1a\u5c06\u914d\u7f6e\u6587\u4ef6\u63d0\u4ea4\u5230\u7f51\u5173\u3002 registerContractInfo\uff1a\u6ce8\u518ccontractInfo\uff0c\u6ce8\u518c\u76ee\u6807\u94fe\u5408\u7ea6\uff08\u8981\u8de8\u7684\u5408\u7ea6\u4fe1\u606f\uff09\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 registerRouterInfo\uff1a\u6ce8\u518crouteInfo\uff0c\u8def\u7531\u4fe1\u606f\uff0c\u539f\u94fe\u7684\u5408\u7ea6\u5230\u76ee\u6807\u94fe\u5408\u7ea6\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 registerPermitRoute\uff1a\u6ce8\u518cpermitRoute\uff0c\u7ba1\u7406\u5458\u4e3a\u7528\u6237\u6ce8\u518c\u5141\u8bb8\u7684\u8def\u7531\u4fe1\u606f\uff0c\u4e00\u4e2a\u7528\u6237\u540d\u4e0b\u90fd\u6709\u54ea\u4e9brouteinfo\uff0c\u5728\u7528\u6237\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u65f6\uff0c\u5408\u7ea6\u91cc\u4f1a\u6821\u9a8c\uff0c\u8be5\u7528\u6237\u6709\u6ca1\u6709\u5411\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613\u7684\u6743\u9650\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 updatePermitRoute\uff1a\u66f4\u65b0permitRoute\uff0c\u66f4\u65b0\u7528\u6237\u7684\u8def\u7531\u6743\u9650\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u5bf9\u5e94\u4fe1\u606f\u5199\u5230\u6570\u636e\u5e93\u91cc\u3002 submitCrossProxyTran\uff1a\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613crossProxyTran\uff0c\u7528\u6237\u60f3repchain\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff0c\u4e00\u822c\u7531\u8de8\u94fe\u670d\u52a1\uff08cross-server\uff09\u540e\u53f0\u6765\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230\u539f\u94feRepChain\u7684\u533a\u5757\u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u4f1a\u7ec4\u7ec7\u4ea4\u6613\u53c2\u6570\uff0c\u7136\u540e\u63d0\u4ea4\u5230\u7f51\u5173\uff0c\u7531\u7f51\u5173\u6784\u9020\u4ee3\u7406\u7b7e\u540d\u4ea4\u6613\u63d0\u4ea4\u5230\u5bf9\u5e94\u7684\u76ee\u6807\u94fe\u3002 submitCrossProxyReceipt\uff1a\u63d0\u4ea4\u5bf9\u5e94\u7684\u56de\u6267crossProxyReceipt\uff0c\u8be5\u65b9\u6cd5\u7531Storage\u6a21\u5757\u8c03\u7528\uff0c\u540c\u6b65\u76ee\u6807\u94fe\u533a\u5757\u65f6\uff0c\u5982\u679c\u540c\u6b65\u5b58\u50a8\u6a21\u5757\u76d1\u6d4b\u5230\u4e0a\u4e00\u6b65\u7684\u4ea4\u6613\u51fa\u5757\u4e86\uff0c\u90a3\u4e48\u5411repchain\u63d0\u4ea4\u4e00\u4e2a\u56de\u6267\u4fe1\u606f\uff0c\u5f53SyncInfo\u6a21\u5757\u540c\u6b65\u5230 \u76ee\u6807\u94fe\u7684\u533a\u5757 \u65f6\uff0c\u63a5\u7740Storage\u6a21\u5757\uff08cross-storage\uff09\u76d1\u6d4b\u5230\u5305\u542b\u8be5\u4ea4\u6613\u7684\u533a\u5757\u4fe1\u606f\u65f6\uff0c\u5c06\u63d0\u4ea4\u4e00\u4e2a\u56de\u6267\u4ea4\u6613\u5230\u6765\u6e90\u94feRepChain\u4e0a\u3002","title":"\u5408\u7ea6\u65b9\u6cd5\u4ecb\u7ecd"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/07.CrossChainManage/#_3","text":"\u4ee3\u7801\u5728repchain-cross-storage/src/main/test\u76ee\u5f55\u4e0b \u8de8\u94fe\u7f51\u5173\u5fc5\u9700\u7684\u4e24\u4e2a\u8bf7\u6c42\u53c2\u6570\uff1achain_hash\uff1a\u94feid\uff0c\u5bf9\u5e94\u4e8eadapterId\uff1bchain_type\uff1a\u94fe\u7c7b\u578b\u540d \u5176\u4e2d\u6d4b\u8bd5\u4f8b\u4e2d\u6d89\u53ca\u5230\u7684zip\u6587\u4ef6\uff0c\u5728repchain-cross-gateway/conf\u4e0b\u81ea\u884c\u6253\u5305 \u542f\u52a8\u8de8\u94fe\u7f51\u5173 \u542f\u52a8GateWayManagement \u542f\u52a8GateWay \u6267\u884c\u6d4b\u8bd5\u4f8binitRepChain()\uff0c\u4e0a\u4f20RepChain\u914d\u7f6e\u6587\u4ef6 \u6267\u884c\u6d4b\u8bd5\u4f8btestRepSyncService()\uff0c\u542f\u52a8\u540c\u6b65RepChain\u7684\u670d\u52a1\uff0c\u6ce8\u610f\u9ad8\u5ea6\u548chash\u7684\u8bbe\u7f6e\uff08\u53ef\u4ee5\u67e5\u770b\u6570\u636e\u5e93\uff09 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterRepChainChaintInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518cRepChain\u81ea\u8eab\u94fe\u4fe1\u606f \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterFsicoChaintInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518cFisco\u94fe\u4fe1\u606f \u6267\u884c\u6d4b\u8bd5\u4f8btestFiscoSyncService()\uff0c\u542f\u52a8\u540c\u6b65FiscoBcos\u7684\u670d\u52a1\uff0c\u6ce8\u610f\u9ad8\u5ea6\u548chash\u7684\u8bbe\u7f6e\uff08\u53ef\u4ee5\u67e5\u770b\u6570\u636e\u5e93\uff09 \u6267\u884c\u6d4b\u8bd5\u4f8btestUpdateFiscoChaintInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u66f4\u65b0Fisco\u94fe\u4fe1\u606f\uff0c\u4e00\u822c\u662f\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\uff0c\u624d\u66f4\u65b0chainInfo \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterContractInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518c\u5408\u7ea6\u4fe1\u606f\uff0c\u8fd9\u91cc\u4ee5FiscoBcos\u4e0a\u90e8\u7f72\u7684HelloWorld\u4e3a\u4f8b \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterRouteInfo()\uff0c\u5411RepChain\u63d0\u4ea4\u6ce8\u518c\u8def\u7531\u4fe1\u606f\uff0c\u8fd9\u91cc\u4e3b\u8981\u662f\u8bf4\u4ece\u54ea\u4e2a\u5408\u7ea6\u8de8\u5230\u54ea\u4e2a\u5408\u7ea6 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterPermitRoute()\uff0c\u5411RepChain\u63d0\u4ea4\u8def\u7531\u6743\u9650\u767b\u8bb0\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bf4\u662f\u5141\u8bb8\u67d0\u4e2a\u7528\u6237\u67d0\u4e2a\u8def\u7531 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterFiscoSubmitCross()\uff0c\u5411FiscoBcos\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\uff0cRepChain\u5b58\u50a8\u6a21\u5757\u4f1a\u89e3\u6790\u533a\u5757\uff0c\u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u53c2\u6570\u5411\u76ee\u6807\u94fe\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff1bFisco\u5b58\u50a8\u6a21\u5757\u4e5f\u4f1a\u89e3\u6790\u5bf9\u5e94\u7684\u533a\u5757\uff0c\u63d0\u4ea4\u56de\u6267\u5230RepChain\u4e0a \u6839\u636echainHash\u6765\u660e\u786e\u662f\u5411\u6765\u6e90\u94fe\u8fd8\u662f\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613 \u6839\u636eaccountId\u6765\u9009\u62e9\u4f7f\u7528\u7f51\u5173\u5904\u7684\u54ea\u4e00\u4e2a\u8d26\u6237\u63d0\u4ea4\u4ea4\u6613 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterFiscoSubmitCross_1()\uff0c\u5411FiscoBcos\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613( \u4f7f\u7528\u548c11\u4e0d\u540c\u7684\u79c1\u94a5 \uff0c\u901a\u8fc7accountId\u6765\u6307\u5b9a)\uff0cRepChain\u5b58\u50a8\u6a21\u5757\u4f1a\u89e3\u6790\u533a\u5757\uff0c\u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u53c2\u6570\u5411\u76ee\u6807\u94fe\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff1bFisco\u5b58\u50a8\u6a21\u5757\u4e5f\u4f1a\u89e3\u6790\u5bf9\u5e94\u7684\u533a\u5757\uff0c\u63d0\u4ea4\u56de\u6267\u5230RepChain\u4e0a \u6839\u636echainHash\u6765\u660e\u786e\u662f\u5411\u6765\u6e90\u94fe\u8fd8\u662f\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613 \u6839\u636eaccountId\u6765\u9009\u62e9\u4f7f\u7528\u7f51\u5173\u5904\u7684\u54ea\u4e00\u4e2a\u8d26\u6237\u63d0\u4ea4\u4ea4\u6613 \u6267\u884c\u6d4b\u8bd5\u4f8btestRegisterRepChainSubmitCross_1()\uff0c\u5411RepChain\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\uff0cRepChain\u5b58\u50a8\u6a21\u5757\u4f1a\u89e3\u6790\u533a\u5757\uff0c\u7136\u540e\u6839\u636e\u5bf9\u5e94\u7684\u53c2\u6570\u5411\u6765\u6e90\u94fe\u63d0\u4ea4\u4ee3\u7406\u4ea4\u6613\uff1bRepChain\u5b58\u50a8\u6a21\u5757\u4e5f\u4f1a\u89e3\u6790\u5bf9\u5e94\u7684\u533a\u5757\uff0c\u63d0\u4ea4\u56de\u6267\u5230RepChain\u4e0a \u6839\u636echainHash\u6765\u660e\u786e\u662f\u5411\u6765\u6e90\u94fe\u8fd8\u662f\u76ee\u6807\u94fe\u63d0\u4ea4\u4ea4\u6613 \u6839\u636eaccountId\u6765\u9009\u62e9\u4f7f\u7528\u7f51\u5173\u5904\u7684\u54ea\u4e00\u4e2a\u8d26\u6237\u63d0\u4ea4\u4ea4\u6613","title":"\u6d4b\u8bd5\u4ecb\u7ecd"},{"location":"01.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6/07.CrossChainManage/#_4","text":"","title":""},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/","text":"\u51c6\u5907\u5de5\u4f5c \u4e00\u3001\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177 1. \u8de8\u94fe\u7f51\u5173( \u5fc5\u987b ) \u8fd0\u884c\u65b9\u5f0f\u53c2\u8003 Gateway 2. \u670d\u52a1\u5668\u914d\u7f6eJava 1.8 ( \u5fc5\u987b ) \u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u662f\u53ef\u4ee5\u7684\uff09\uff0c\u4ece \u5b98\u7f51 \u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u76f4\u63a5\u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c \u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6216\u8005\u5728\u7f16\u8bd1\u5668\u4e2d\u6307\u5b9a\u5f53\u524d\u7248\u672cjdk\u3002 3. \u6570\u636e\u5e93 ( \u5fc5\u987b ) \u9700\u8981\u6709\u8fbe\u68a68\u6216mysql8\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\uff0c\u5bfc\u5165\u6570\u636e\u7ed3\u6784\u53c2\u8003 https://gitee.com/BTAJL/repchain-cross-server 4. \u8de8\u94fe\u5e73\u53f0\u670d\u52a1\u7aef\uff0c\u8de8\u94fe\u5e73\u53f0\u524d\u7aef ( \u5fc5\u987b ) \u670d\u52a1\u7aef https://gitee.com/BTAJL/repchain-cross-server \uff0c\u6253\u5305\u53c2\u8003README.md\u3002 \u524d\u7aef https://gitee.com/BTAJL/repchain-cross-web \uff0c\u6253\u5305\u53c2\u8003README.md\uff0c\u90e8\u7f72\u63a8\u8350\u653e\u5230nginx\u4e2d\u3002 5.\u90e8\u7f72\u5305\u542b\u8de8\u94fe\u5408\u7ea6\u7684RepChain\uff0c\u53ca\u5176\u4ed6\u94fe\u3002","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_1","text":"","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#_2","text":"","title":"\u4e00\u3001\u9700\u8981\u51c6\u5907\u7684\u73af\u5883\u53ca\u5de5\u5177"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#1","text":"\u8fd0\u884c\u65b9\u5f0f\u53c2\u8003 Gateway","title":"1. \u8de8\u94fe\u7f51\u5173(\u5fc5\u987b)"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#2-java-18","text":"\u5efa\u8bae\u4f7f\u7528 zulu-jdk \uff08oracle-jdk\u4e5f\u662f\u53ef\u4ee5\u7684\uff09\uff0c\u4ece \u5b98\u7f51 \u4e0b\u8f7d\uff0c\u4e5f\u53ef\u4f7f\u7528 IDEA \u76f4\u63a5\u4e0b\u8f7d(File->Project Structure->SDKS\uff0c\u7136\u540e\u9009\u62e9\"+\"\uff0c\u9009\u62e9Download JDK)\uff0c \u9009\u62e9Azul-zulu-community\uff0cjdk-8\u3002 \u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6216\u8005\u5728\u7f16\u8bd1\u5668\u4e2d\u6307\u5b9a\u5f53\u524d\u7248\u672cjdk\u3002","title":"2. \u670d\u52a1\u5668\u914d\u7f6eJava 1.8 (\u5fc5\u987b)"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#3","text":"\u9700\u8981\u6709\u8fbe\u68a68\u6216mysql8\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\uff0c\u5bfc\u5165\u6570\u636e\u7ed3\u6784\u53c2\u8003 https://gitee.com/BTAJL/repchain-cross-server","title":"3. \u6570\u636e\u5e93 (\u5fc5\u987b)"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#4","text":"\u670d\u52a1\u7aef https://gitee.com/BTAJL/repchain-cross-server \uff0c\u6253\u5305\u53c2\u8003README.md\u3002 \u524d\u7aef https://gitee.com/BTAJL/repchain-cross-web \uff0c\u6253\u5305\u53c2\u8003README.md\uff0c\u90e8\u7f72\u63a8\u8350\u653e\u5230nginx\u4e2d\u3002","title":"4. \u8de8\u94fe\u5e73\u53f0\u670d\u52a1\u7aef\uff0c\u8de8\u94fe\u5e73\u53f0\u524d\u7aef (\u5fc5\u987b)"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/01.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/#5repchain","text":"","title":"5.\u90e8\u7f72\u5305\u542b\u8de8\u94fe\u5408\u7ea6\u7684RepChain\uff0c\u53ca\u5176\u4ed6\u94fe\u3002"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/02.%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/","text":"\u5e73\u53f0\u914d\u7f6e \u4e00\u3001\u767b\u5f55\u5e73\u53f0\uff0c\u5e76\u914d\u7f6e\u57fa\u7840\u9879 1. \u4f7f\u7528super_admin\u8d26\u6237\u767b\u5f55\u5e73\u53f0 2. \u914d\u7f6e\u7f51\u5173\u5730\u5740\uff0c\u53ca\u90e8\u7f72\u4e86\u8de8\u94fe\u5408\u7ea6\u7684RepChain\u5730\u5740 3. \u521b\u5efa\u7b2c\u4e00\u4e2a\u94fe\u4fe1\u606f \u6ce8\u610f \u7b2c\u4e00\u4e2a\u94fe\u4fe1\u606f\uff0c\u5fc5\u987b\u4e3a\u90e8\u7f72\u4e86\u8de8\u94fe\u5408\u7ea6\u7684RepChain\u4fe1\u606f\u3002 \u5982\u679c\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u524d\u884c\u6570\u636e\u663e\u793a \u6570\u636e\u4e0a\u94fe\u4e2d \uff0c\u5219\u9700\u8981\u7b49\u5f85\u5e73\u53f0\u540c\u6b65\u6570\u636e\u540e\uff0c\u65b9\u53ef\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002\uff08\u521b\u5efa\u7b2c\u4e00\u4e2a\u94fe\u4fe1\u606f\u65f6\uff0c\u5f00\u542f\u6570\u636e\u540c\u6b65\u9664\u5916\uff09 \u70b9\u51fb\u8de8\u94fe\u4fe1\u606f\u7ba1\u7406 \u70b9\u51fb\u65b0\u589e \u65b0\u589e\u8de8\u94fe\u4fe1\u606f\uff0c\u914d\u7f6e\u6587\u4ef6\u8bf7\u8be2\u95ee\u7ba1\u7406\u5458 \u70b9\u51fb\u5f00\u542f\u540c\u6b65 \u6ce8\u610f \u82e5\u6b64\u65f6\uff0c\u4e0d\u662f\u65b0\u589e\u7b2c\u4e00\u6761\u94fe\u4fe1\u606f\uff0c\u5219\u9700\u8981\u7b49\u5f85\u6570\u636e\u4e0a\u94fe\uff0c\u5728\u8fdb\u884c\u5f00\u542f\u540c\u6b65\u3002 \u68c0\u67e5\u65b9\u5f0f\u4e3a\uff1a\u5237\u65b0\u9875\u9762\uff0c\u5f53\u524d\u884c\u4e0d\u518d\u51fa\u73b0 \u6570\u636e\u4e0a\u94fe\u4e2d \u5f00\u542f\u540c\u6b65\u540e\uff0c\u53ef\u4ee5\u5728\u8de8\u94fe\u533a\u5757\u94fe\u6d4f\u89c8\u5668\u67e5\u770b\u5230\u533a\u5757\u548c\u4ea4\u6613\uff0c\u81f3\u6b64\uff0c\u57fa\u7840\u914d\u7f6e\u5b8c\u6210\u3002","title":"\u5e73\u53f0\u914d\u7f6e"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/02.%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/#_1","text":"","title":"\u5e73\u53f0\u914d\u7f6e"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/02.%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/#_2","text":"","title":"\u4e00\u3001\u767b\u5f55\u5e73\u53f0\uff0c\u5e76\u914d\u7f6e\u57fa\u7840\u9879"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/02.%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/#1-super_admin","text":"","title":"1. \u4f7f\u7528super_admin\u8d26\u6237\u767b\u5f55\u5e73\u53f0"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/02.%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/#2-repchain","text":"","title":"2. \u914d\u7f6e\u7f51\u5173\u5730\u5740\uff0c\u53ca\u90e8\u7f72\u4e86\u8de8\u94fe\u5408\u7ea6\u7684RepChain\u5730\u5740"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/02.%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AE/#3","text":"\u6ce8\u610f \u7b2c\u4e00\u4e2a\u94fe\u4fe1\u606f\uff0c\u5fc5\u987b\u4e3a\u90e8\u7f72\u4e86\u8de8\u94fe\u5408\u7ea6\u7684RepChain\u4fe1\u606f\u3002 \u5982\u679c\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u524d\u884c\u6570\u636e\u663e\u793a \u6570\u636e\u4e0a\u94fe\u4e2d \uff0c\u5219\u9700\u8981\u7b49\u5f85\u5e73\u53f0\u540c\u6b65\u6570\u636e\u540e\uff0c\u65b9\u53ef\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002\uff08\u521b\u5efa\u7b2c\u4e00\u4e2a\u94fe\u4fe1\u606f\u65f6\uff0c\u5f00\u542f\u6570\u636e\u540c\u6b65\u9664\u5916\uff09 \u70b9\u51fb\u8de8\u94fe\u4fe1\u606f\u7ba1\u7406 \u70b9\u51fb\u65b0\u589e \u65b0\u589e\u8de8\u94fe\u4fe1\u606f\uff0c\u914d\u7f6e\u6587\u4ef6\u8bf7\u8be2\u95ee\u7ba1\u7406\u5458 \u70b9\u51fb\u5f00\u542f\u540c\u6b65 \u6ce8\u610f \u82e5\u6b64\u65f6\uff0c\u4e0d\u662f\u65b0\u589e\u7b2c\u4e00\u6761\u94fe\u4fe1\u606f\uff0c\u5219\u9700\u8981\u7b49\u5f85\u6570\u636e\u4e0a\u94fe\uff0c\u5728\u8fdb\u884c\u5f00\u542f\u540c\u6b65\u3002 \u68c0\u67e5\u65b9\u5f0f\u4e3a\uff1a\u5237\u65b0\u9875\u9762\uff0c\u5f53\u524d\u884c\u4e0d\u518d\u51fa\u73b0 \u6570\u636e\u4e0a\u94fe\u4e2d \u5f00\u542f\u540c\u6b65\u540e\uff0c\u53ef\u4ee5\u5728\u8de8\u94fe\u533a\u5757\u94fe\u6d4f\u89c8\u5668\u67e5\u770b\u5230\u533a\u5757\u548c\u4ea4\u6613\uff0c\u81f3\u6b64\uff0c\u57fa\u7840\u914d\u7f6e\u5b8c\u6210\u3002","title":"3. \u521b\u5efa\u7b2c\u4e00\u4e2a\u94fe\u4fe1\u606f"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/","text":"\u4f7f\u7528\u8bf4\u660e \u4e00\u3001\u94fe\u4fe1\u606f \u65b0\u589e\u94fe\u4fe1\u606f\u53ef\u53c2\u8003 \u5e73\u53f0\u914d\u7f6e \u73b0\u5728\u53ef\u4ee5\u67e5\u770b\u6709\u4e24\u4e2a\u94fe\u4fe1\u606fRepChain\u548cFisco Bcos \u4e8c\u3001\u914d\u7f6e\u5408\u7ea6 \u70b9\u51fb\u5408\u7ea6\u7ba1\u7406 \u65b0\u589e\u5408\u7ea6 \uff08\u6b64\u5904\u53ef\u4ee5\u5c06RepChain\u73b0\u6709\u5408\u7ea6\u8f6c\u4e3a\u8de8\u94fe\u5408\u7ea6\uff09 \u5728\u4e0b\u4e00\u6b65\u914d\u7f6e\u8def\u7531\u65f6\uff0c\u9700\u8981\u4e24\u4e2a\u5408\u7ea6\u8fdb\u884c\u8de8\u94fe\u64cd\u4f5c\uff0c\u6b64\u5904\u65b0\u5efa\u4e00\u4e2aBCOS\u5408\u7ea6\uff0c\u5c06RepChain\u73b0\u6709\u7684\u4e00\u4e2a\u5408\u7ea6\u8f6c\u4e3a\u8de8\u94fe\u5408\u7ea6 \u4e09\u3001\u8def\u7531\u7ba1\u7406 \u70b9\u51fb\u8def\u7531\u7ba1\u7406 \u70b9\u51fb\u65b0\u589e\uff0c\u65b0\u589e\u4e00\u4e2a\u8def\u7531\u4fe1\u606f \u6ce8\u610f \u5982\u679c\u6b64\u65f6\u67e5\u770b\u4e0d\u5230\u521a\u521a\u65b0\u589e\u7684\u8de8\u94fe\u5408\u7ea6\u4fe1\u606f\uff0c\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5237\u65b0\u9875\u9762\u3002 \u6216\u8005\uff0c\u8fd4\u56de\u5408\u7ea6\u754c\u9762\uff0c\u67e5\u770b\u5408\u7ea6\u662f\u5426\u5df2\u4e0a\u94fe\u3002 \u56db\u3001\u7528\u6237\u8def\u7531\u6388\u6743 \u6ce8\u610f \u6388\u6743\u524d\uff0c\u8bf7\u7b49\u5f85\u8def\u7531\u4fe1\u606f\u6210\u529f\u4e0a\u94fe \u9009\u62e9\u9700\u8981\u6388\u6743\u7684\u7528\u6237\uff0c\u70b9\u51fb\u6388\u6743\u6309\u94ae \u9009\u62e9\u9700\u8981\u6388\u6743\u7ed9\u5f53\u524d\u7528\u6237\u7684\u8def\u7531 \u4e94\u3001\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613 \u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u6b64\u5904\u4ecb\u7ecd\u901a\u8fc7\u754c\u9762\u8fdb\u884c\u63d0\u4ea4\uff0c\u70b9\u51fb\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613 \u6ce8\u610f \u6b64\u5904\u53ef\u4ee5\u9009\u62e9\u5411\u539f\u94fe\u63d0\u4ea4\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5411\u76ee\u6807\u94fe\u63d0\u4ea4 \u5982\u679c\u5411FiscoBcos\u63d0\u4ea4\u4ea4\u6613\uff0c\u9700\u8981\u901a\u8fc7\u63a7\u5236\u53f0\u5c06\u53c2\u6570\u8fdb\u884c\u7f16\u7801\uff0c\u590d\u5236\u5230\u8868\u5355\u4e2d\uff0c\u518d\u8fdb\u884c\u63d0\u4ea4\uff0c\u7f16\u7801\u65b9\u5f0f\u53c2\u8003\u4e0b\u4e00\u7ae0\u3002 \u7b7e\u540d\u8d26\u6237\u73b0\u5728\u9ed8\u8ba4\u4e3a\u6bcf\u4e2a\u94fe\u4e09\u4e2a\u8d26\u6237\uff0c\u653e\u7f6e\u518d\u7f51\u5173\u4e0b\u3002 \u5982\u679c\u9700\u8981\u589e\u52a0\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff0c\u5c06\u76f8\u5173\u8d26\u6237pem\u653e\u7f6e\u518d\u7f51\u5173\u914d\u7f6e\u6587\u4ef6\u5939\u4e0b\uff0c\u5e76\u4ece\u6570\u636e\u5e93\u4e2d\u6dfb\u52a0\u76f8\u5173\u8d26\u6237\u4fe1\u606f\uff0c\u6570\u636e\u8868\u4e3aCROSS_GATEWAY_ACCOUNT\u3002","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_1","text":"","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2","text":"\u65b0\u589e\u94fe\u4fe1\u606f\u53ef\u53c2\u8003 \u5e73\u53f0\u914d\u7f6e \u73b0\u5728\u53ef\u4ee5\u67e5\u770b\u6709\u4e24\u4e2a\u94fe\u4fe1\u606fRepChain\u548cFisco Bcos","title":"\u4e00\u3001\u94fe\u4fe1\u606f"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3","text":"\u70b9\u51fb\u5408\u7ea6\u7ba1\u7406 \u65b0\u589e\u5408\u7ea6 \uff08\u6b64\u5904\u53ef\u4ee5\u5c06RepChain\u73b0\u6709\u5408\u7ea6\u8f6c\u4e3a\u8de8\u94fe\u5408\u7ea6\uff09 \u5728\u4e0b\u4e00\u6b65\u914d\u7f6e\u8def\u7531\u65f6\uff0c\u9700\u8981\u4e24\u4e2a\u5408\u7ea6\u8fdb\u884c\u8de8\u94fe\u64cd\u4f5c\uff0c\u6b64\u5904\u65b0\u5efa\u4e00\u4e2aBCOS\u5408\u7ea6\uff0c\u5c06RepChain\u73b0\u6709\u7684\u4e00\u4e2a\u5408\u7ea6\u8f6c\u4e3a\u8de8\u94fe\u5408\u7ea6","title":"\u4e8c\u3001\u914d\u7f6e\u5408\u7ea6"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_4","text":"\u70b9\u51fb\u8def\u7531\u7ba1\u7406 \u70b9\u51fb\u65b0\u589e\uff0c\u65b0\u589e\u4e00\u4e2a\u8def\u7531\u4fe1\u606f \u6ce8\u610f \u5982\u679c\u6b64\u65f6\u67e5\u770b\u4e0d\u5230\u521a\u521a\u65b0\u589e\u7684\u8de8\u94fe\u5408\u7ea6\u4fe1\u606f\uff0c\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5237\u65b0\u9875\u9762\u3002 \u6216\u8005\uff0c\u8fd4\u56de\u5408\u7ea6\u754c\u9762\uff0c\u67e5\u770b\u5408\u7ea6\u662f\u5426\u5df2\u4e0a\u94fe\u3002","title":"\u4e09\u3001\u8def\u7531\u7ba1\u7406"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_5","text":"\u6ce8\u610f \u6388\u6743\u524d\uff0c\u8bf7\u7b49\u5f85\u8def\u7531\u4fe1\u606f\u6210\u529f\u4e0a\u94fe \u9009\u62e9\u9700\u8981\u6388\u6743\u7684\u7528\u6237\uff0c\u70b9\u51fb\u6388\u6743\u6309\u94ae \u9009\u62e9\u9700\u8981\u6388\u6743\u7ed9\u5f53\u524d\u7528\u6237\u7684\u8def\u7531","title":"\u56db\u3001\u7528\u6237\u8def\u7531\u6388\u6743"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/03.%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_6","text":"\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u6b64\u5904\u4ecb\u7ecd\u901a\u8fc7\u754c\u9762\u8fdb\u884c\u63d0\u4ea4\uff0c\u70b9\u51fb\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613 \u6ce8\u610f \u6b64\u5904\u53ef\u4ee5\u9009\u62e9\u5411\u539f\u94fe\u63d0\u4ea4\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5411\u76ee\u6807\u94fe\u63d0\u4ea4 \u5982\u679c\u5411FiscoBcos\u63d0\u4ea4\u4ea4\u6613\uff0c\u9700\u8981\u901a\u8fc7\u63a7\u5236\u53f0\u5c06\u53c2\u6570\u8fdb\u884c\u7f16\u7801\uff0c\u590d\u5236\u5230\u8868\u5355\u4e2d\uff0c\u518d\u8fdb\u884c\u63d0\u4ea4\uff0c\u7f16\u7801\u65b9\u5f0f\u53c2\u8003\u4e0b\u4e00\u7ae0\u3002 \u7b7e\u540d\u8d26\u6237\u73b0\u5728\u9ed8\u8ba4\u4e3a\u6bcf\u4e2a\u94fe\u4e09\u4e2a\u8d26\u6237\uff0c\u653e\u7f6e\u518d\u7f51\u5173\u4e0b\u3002 \u5982\u679c\u9700\u8981\u589e\u52a0\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff0c\u5c06\u76f8\u5173\u8d26\u6237pem\u653e\u7f6e\u518d\u7f51\u5173\u914d\u7f6e\u6587\u4ef6\u5939\u4e0b\uff0c\u5e76\u4ece\u6570\u636e\u5e93\u4e2d\u6dfb\u52a0\u76f8\u5173\u8d26\u6237\u4fe1\u606f\uff0c\u6570\u636e\u8868\u4e3aCROSS_GATEWAY_ACCOUNT\u3002","title":"\u4e94\u3001\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/04.%E8%B7%A8%E9%93%BE%E4%BA%A4%E6%98%93%E6%8F%90%E4%BA%A4/","text":"\u8de8\u94fe\u4ea4\u6613\u63d0\u4ea4\u4ee3\u7801\u793a\u4f8b \u53c2\u8003\u8de8\u94fe\u5408\u7ea6\u4e2d\u5bf9 submitCrossProxyTran \u7684\u4ecb\u7ecd\uff0c\u7528\u6237\uff08\u6216cross-server\u8de8\u94fe\u670d\u52a1\u540e\u53f0\uff09\u9996\u5148\u5411RepChain\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u8bf7\u6c42 @Test @Order ( 11 ) void testRegisterFabric2SubmitCross () throws Exception { List < String > content = new ArrayList <> (); content . add ( \"asset1\" ); content . add ( \"blue\" ); content . add ( \"20\" ); content . add ( \"Tomoko\" ); content . add ( \"400\" ); // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"74e8089786e54f859112d20666719ac7\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-basic\" )) . fluentPut ( \"accountId\" , \"appUser\" ) // fabrci\u5408\u7ea6\u65b9\u6cd5UpdateAsset . fluentPut ( \"methodName\" , \"UpdateAsset\" ) // fabric\u5408\u7ea6\u65b9\u6cd5UpdateAsset\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , content . stream (). collect ( Collectors . joining ( \",\" ))); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); System . out . println ( res ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); } @Test @Order ( 12 ) void testRegisterFiscoSubmitCross () throws Exception { String content = \"0x4ed3885e00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000028636f6e74656e742d3266613130326336626537383462663838653836613734333961636265313062000000000000000000000000000000000000000000000000\" ; // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"74e8089786e54f859112d20666719ac6\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-HelloWorld\" )) . fluentPut ( \"accountId\" , \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" ) // fisco-bcos\u7684\u5408\u7ea6\u65b9\u6cd5set . fluentPut ( \"methodName\" , \"set\" ) // isco-bcos\u5408\u7ea6\u65b9\u6cd5set\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , content ); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); } @Test @Order ( 14 ) void testRegisterRepChainSubmitCross () throws Exception { // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"79e5d00cc30f40d3a857ec4511c4fa4e\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-HelloWorld\" )) . fluentPut ( \"accountId\" , \"identity-net:121000005l35120456.node1\" ) // RepChain\u5408\u7ea6\u65b9\u6cd5transfer . fluentPut ( \"methodName\" , \"transfer\" ) // RepChain\u5408\u7ea6\u65b9\u6cd5transfer\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , \"{\\n\" + \" \\\"from\\\" : \\\"identity-net:121000005l35120456\\\",\\n\" + \" \\\"to\\\" : \\\"identity-net:12110107bi45jh675g\\\",\\n\" + \" \\\"amount\\\" : 5\\n\" + \"}\" ); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); } \u6ce8\u610f fisco-bcos\u7684\u53c2\u6570\u6bd4\u8f83\u7279\u6b8a\uff0c\u9700\u8981\u7ecf\u8fc7\u7f16\u7801\uff0c\u56e0\u6b64\u5b9e\u9645\u4f7f\u7528\u8fc7\u7a0b\u53ef\u53c2\u8003\u5982\u4e0b\uff1a 1.\u4ee5 fisco/console-1.2.0 \u4e3a\u4f8b\uff0c\u9996\u5148\u5c06solity\u5408\u7ea6\u8f6c\u4e3ajava\u5408\u7ea6\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a # \u811a\u672csol2java.sh\u5728fisco\u7684\u7ec8\u7aef\u5305\u4e0bfisco/console-1.2.0/sol2java.sh ./sol2java.sh contracts/solidity/HelloWorld.sol 2.\u7f16\u8f91\u751f\u6210\u7684java\u6587\u4ef6 vim contracts/sdk/java/contracts/solidity/HelloWorld/sol/HelloWorld.java 3.\u6458\u53d6\u6240\u9700\u8981\u7684\u65b9\u6cd5 public void set ( String n , TransactionSucCallback callback ) { final Function function = new Function ( FUNC_SET , Arrays . < Type > asList ( new org . fisco . bcos . web3j . abi . datatypes . Utf8String ( n )), Collections . < TypeReference <?>> emptyList ()); asyncExecuteTransaction ( function , callback ); } 4.\u7f16\u7801\u6211\u4eec\u8981\u6784\u9020\u7684\u4ea4\u6613\u7684\u53c2\u6570 package rep.cross.contract ; import java.util.Arrays ; import java.util.Collections ; import cn.hutool.core.util.IdUtil ; import org.fisco.bcos.web3j.abi.FunctionEncoder ; import org.fisco.bcos.web3j.abi.TypeReference ; import org.fisco.bcos.web3j.abi.datatypes.Function ; import org.fisco.bcos.web3j.abi.datatypes.Type ; import org.fisco.bcos.web3j.abi.datatypes.Utf8String ; /** * @author zyf */ public class EncodeFunction { public static void main ( String [] args ) { // \u7f16\u7801\u53c2\u6570 String content = \"content-\" + IdUtil . simpleUUID (); final Function function = new Function ( \"set\" , Arrays . < Type > asList ( new Utf8String ( content )), Collections . < TypeReference <?>> emptyList ()); System . out . println ( FunctionEncoder . encode ( function )); } } 5.\u8f93\u51fa\u7684\u53c2\u6570\u8865\u5145\u5230methodArgs\uff1a @Test @Order ( 12 ) void testRegisterFiscoSubmitCross () throws Exception { // \u7b2c4\u6b65\u4e2d\u7f16\u7801\u8f93\u51fa\u7684\u5b57\u7b26\u4e32 String content = \"0x4ed3885e00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000028636f6e74656e742d3266613130326336626537383462663838653836613734333961636265313062000000000000000000000000000000000000000000000000\" ; // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"74e8089786e54f859112d20666719ac6\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-HelloWorld\" )) . fluentPut ( \"accountId\" , \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" ) // fisco-bcos\u7684\u5408\u7ea6\u65b9\u6cd5set . fluentPut ( \"methodName\" , \"set\" ) // isco-bcos\u5408\u7ea6\u65b9\u6cd5set\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , content ); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); }","title":"\u8de8\u94fe\u4ea4\u6613\u63d0\u4ea4"},{"location":"02.%E8%B7%A8%E9%93%BE%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0/04.%E8%B7%A8%E9%93%BE%E4%BA%A4%E6%98%93%E6%8F%90%E4%BA%A4/#_1","text":"\u53c2\u8003\u8de8\u94fe\u5408\u7ea6\u4e2d\u5bf9 submitCrossProxyTran \u7684\u4ecb\u7ecd\uff0c\u7528\u6237\uff08\u6216cross-server\u8de8\u94fe\u670d\u52a1\u540e\u53f0\uff09\u9996\u5148\u5411RepChain\u63d0\u4ea4\u8de8\u94fe\u4ea4\u6613\u8bf7\u6c42 @Test @Order ( 11 ) void testRegisterFabric2SubmitCross () throws Exception { List < String > content = new ArrayList <> (); content . add ( \"asset1\" ); content . add ( \"blue\" ); content . add ( \"20\" ); content . add ( \"Tomoko\" ); content . add ( \"400\" ); // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"74e8089786e54f859112d20666719ac7\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-basic\" )) . fluentPut ( \"accountId\" , \"appUser\" ) // fabrci\u5408\u7ea6\u65b9\u6cd5UpdateAsset . fluentPut ( \"methodName\" , \"UpdateAsset\" ) // fabric\u5408\u7ea6\u65b9\u6cd5UpdateAsset\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , content . stream (). collect ( Collectors . joining ( \",\" ))); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); System . out . println ( res ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); } @Test @Order ( 12 ) void testRegisterFiscoSubmitCross () throws Exception { String content = \"0x4ed3885e00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000028636f6e74656e742d3266613130326336626537383462663838653836613734333961636265313062000000000000000000000000000000000000000000000000\" ; // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"74e8089786e54f859112d20666719ac6\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-HelloWorld\" )) . fluentPut ( \"accountId\" , \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" ) // fisco-bcos\u7684\u5408\u7ea6\u65b9\u6cd5set . fluentPut ( \"methodName\" , \"set\" ) // isco-bcos\u5408\u7ea6\u65b9\u6cd5set\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , content ); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); } @Test @Order ( 14 ) void testRegisterRepChainSubmitCross () throws Exception { // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"79e5d00cc30f40d3a857ec4511c4fa4e\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-HelloWorld\" )) . fluentPut ( \"accountId\" , \"identity-net:121000005l35120456.node1\" ) // RepChain\u5408\u7ea6\u65b9\u6cd5transfer . fluentPut ( \"methodName\" , \"transfer\" ) // RepChain\u5408\u7ea6\u65b9\u6cd5transfer\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , \"{\\n\" + \" \\\"from\\\" : \\\"identity-net:121000005l35120456\\\",\\n\" + \" \\\"to\\\" : \\\"identity-net:12110107bi45jh675g\\\",\\n\" + \" \\\"amount\\\" : 5\\n\" + \"}\" ); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); } \u6ce8\u610f fisco-bcos\u7684\u53c2\u6570\u6bd4\u8f83\u7279\u6b8a\uff0c\u9700\u8981\u7ecf\u8fc7\u7f16\u7801\uff0c\u56e0\u6b64\u5b9e\u9645\u4f7f\u7528\u8fc7\u7a0b\u53ef\u53c2\u8003\u5982\u4e0b\uff1a 1.\u4ee5 fisco/console-1.2.0 \u4e3a\u4f8b\uff0c\u9996\u5148\u5c06solity\u5408\u7ea6\u8f6c\u4e3ajava\u5408\u7ea6\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a # \u811a\u672csol2java.sh\u5728fisco\u7684\u7ec8\u7aef\u5305\u4e0bfisco/console-1.2.0/sol2java.sh ./sol2java.sh contracts/solidity/HelloWorld.sol 2.\u7f16\u8f91\u751f\u6210\u7684java\u6587\u4ef6 vim contracts/sdk/java/contracts/solidity/HelloWorld/sol/HelloWorld.java 3.\u6458\u53d6\u6240\u9700\u8981\u7684\u65b9\u6cd5 public void set ( String n , TransactionSucCallback callback ) { final Function function = new Function ( FUNC_SET , Arrays . < Type > asList ( new org . fisco . bcos . web3j . abi . datatypes . Utf8String ( n )), Collections . < TypeReference <?>> emptyList ()); asyncExecuteTransaction ( function , callback ); } 4.\u7f16\u7801\u6211\u4eec\u8981\u6784\u9020\u7684\u4ea4\u6613\u7684\u53c2\u6570 package rep.cross.contract ; import java.util.Arrays ; import java.util.Collections ; import cn.hutool.core.util.IdUtil ; import org.fisco.bcos.web3j.abi.FunctionEncoder ; import org.fisco.bcos.web3j.abi.TypeReference ; import org.fisco.bcos.web3j.abi.datatypes.Function ; import org.fisco.bcos.web3j.abi.datatypes.Type ; import org.fisco.bcos.web3j.abi.datatypes.Utf8String ; /** * @author zyf */ public class EncodeFunction { public static void main ( String [] args ) { // \u7f16\u7801\u53c2\u6570 String content = \"content-\" + IdUtil . simpleUUID (); final Function function = new Function ( \"set\" , Arrays . < Type > asList ( new Utf8String ( content )), Collections . < TypeReference <?>> emptyList ()); System . out . println ( FunctionEncoder . encode ( function )); } } 5.\u8f93\u51fa\u7684\u53c2\u6570\u8865\u5145\u5230methodArgs\uff1a @Test @Order ( 12 ) void testRegisterFiscoSubmitCross () throws Exception { // \u7b2c4\u6b65\u4e2d\u7f16\u7801\u8f93\u51fa\u7684\u5b57\u7b26\u4e32 String content = \"0x4ed3885e00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000028636f6e74656e742d3266613130326336626537383462663838653836613734333961636265313062000000000000000000000000000000000000000000000000\" ; // \u63d0\u4ea4\u4ea4\u6613 String tranId = IdUtil . randomUUID (); JSONObject jsonObject = new JSONObject (); jsonObject . fluentPut ( \"chainHash\" , \"74e8089786e54f859112d20666719ac6\" ) . fluentPut ( \"routeHash\" , DigestUtils . sha256Hex ( \"ContractAssetsTPL-to-HelloWorld\" )) . fluentPut ( \"accountId\" , \"0x71440f40691d8b2e2c6e1cce7685f7e4000cfcd1\" ) // fisco-bcos\u7684\u5408\u7ea6\u65b9\u6cd5set . fluentPut ( \"methodName\" , \"set\" ) // isco-bcos\u5408\u7ea6\u65b9\u6cd5set\u7684\u53c2\u6570 . fluentPut ( \"methodArgs\" , content ); Peer . Transaction tran = tranCreator . createInvokeTran ( tranId , certId , crossManageId , RepConstant . SUBMIT_CROSS_PROXYTRAN , jsonObject . toJSONString (), 0 , \"\" ); String tranHex = Hex . encodeHexString ( tran . toByteArray ()); JSONObject res = tranPostClient . postSignedTran ( tranHex ); assertThat ( res . getString ( \"txid\" )). isEqualTo ( tran . getId ()); }","title":"\u8de8\u94fe\u4ea4\u6613\u63d0\u4ea4\u4ee3\u7801\u793a\u4f8b"}]}